(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)
(FILECREATED "23-Feb-89 18:28:23" |{NB:PARC:XEROX}<NFS>MEDLEY>FIX-FILE-TYPES.;2| 1684   

      changes to%:  (VARS FIX-FILE-TYPE-INFO)

      previous date%: "16-Dec-88 18:27:36" |{NB:PARC:XEROX}<NFS>MEDLEY>FIX-FILE-TYPES.;1|)


(* "
Copyright (c) 1988, 1989 by Xerox Corporation.  All rights reserved.
")

(PRETTYCOMPRINT FIX-FILE-TYPESCOMS)

(RPAQQ FIX-FILE-TYPESCOMS ((FNS FIX-FILE-TYPES)
                               (VARS FIX-FILE-TYPE-INFO)))
(DEFINEQ

(FIX-FILE-TYPES
(LAMBDA (DIR) (* ; "Edited 16-Dec-88 18:24 by bvm") (for TYPEINFO in FIX-FILE-TYPE-INFO bind (N _ 0) do (RESETLST (LET ((GEN (\GENERATEFILES (if DIR then (PACKFILENAME.STRING (QUOTE DIRECTORY) DIR (QUOTE BODY) (CAR TYPEINFO)) else (CAR TYPEINFO)) (QUOTE (TYPE)) (QUOTE (RESETLST)))) FILE TYPE) (while (SETQ FILE (\GENERATENEXTFILE GEN)) do (CASE (SETQ TYPE (\GENERATEFILEINFO GEN (QUOTE TYPE))) ((NIL TEXT) (* ; "Maybe inappropriately TEXT") (if (OR (NULL (CADDR TYPEINFO)) (CL:FUNCALL (CADDR TYPEINFO) FILE)) then (add N 1) (CL:FORMAT T "~&~A ~A => " FILE TYPE) (if (SETFILEINFO FILE (QUOTE TYPE) (CADR TYPEINFO)) then (PRIN1 (CADR TYPEINFO)) else (PRIN1 "***Could not set type***")))))))) finally (RETURN (CL:FORMAT NIL "~d files with bad type found" N))))
)
)

(RPAQQ FIX-FILE-TYPE-INFO (("*.mail" LAFITE)
                               ("*.mail-lafite-toc" BINARY)
                               ("*.dfasl" BINARY)
                               ("*.lcom" BINARY)
                               ("*.lafite-form" BINARY)))
(PUTPROPS FIX-FILE-TYPES COPYRIGHT ("Xerox Corporation" 1988 1989))
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (534 1326 (FIX-FILE-TYPES 544 . 1324)))))
STOP
