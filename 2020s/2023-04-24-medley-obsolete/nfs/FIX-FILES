(DEFINE-FILE-INFO READTABLE "XCL" PACKAGE "INTERLISP")
(FILECREATED "31-Jan-89 21:46:29" |{NB:PARC:XEROX}<NFS>MEDLEY>FIX-FILES.;1| 2462   

      |changes| |to:|  (VARS FIX-FILESCOMS)
                       (FNS FIX-FILES))


; Copyright (c) 1989 by Xerox Corporation.  All rights reserved.

(PRETTYCOMPRINT FIX-FILESCOMS)

(RPAQQ FIX-FILESCOMS ((FILES |{NB:PARC:XEROX}<NFS>MEDLEY>FIX-FILE-TYPES|)
                          (FNS FIX-FILES)))

(FILESLOAD |{NB:PARC:XEROX}<NFS>MEDLEY>FIX-FILE-TYPES|)
(DEFINEQ

(FIX-FILES
  (LAMBDA (DIR)                                          (* \; "Edited 31-Jan-89 21:43 by bbb")

    (* |;;| "Fix the file types")

    (FIX-FILE-TYPES DIR)

    (* |;;| "Now change the names to eliminate slashes")

    (RESETLST
        (LET ((GEN (\\GENERATEFILES (|if| DIR
                                        |then| (PACKFILENAME.STRING 'DIRECTORY DIR 'BODY "*.*")
                                      |else| "*.*")
                          NIL
                          '(RESETLST)))
              FILE NEWFILE)
             (|while| (SETQ FILE (\\GENERATENEXTFILE GEN)) |bind| |SlashPos|
                |do| (|if| (SETQ |SlashPos| (STRPOSL (LIST (CHARCODE /))
                                                           FILE 1))
                             |then| 

                                   (* |;;| 
                          "Found a slash.  Go through and replace all slashes (/) with hyphens (-)")

                                   (SETQ NEWFILE (CONCAT FILE))
                                   (|while| |SlashPos| |do| (SETQ NEWFILE (RPLCHARCODE
                                                                                   NEWFILE |SlashPos|
                                                                                   (CHARCODE "-")))
                                                                 (SETQ |SlashPos|
                                                                  (STRPOSL (LIST (CHARCODE /))
                                                                         NEWFILE
                                                                         (ADD1 |SlashPos|))))
                                   (RENAMEFILE FILE NEWFILE)
                                   (|printout| T "renaming " FILE " to " NEWFILE T)))))))
)
(PUTPROPS FIX-FILES COPYRIGHT ("Xerox Corporation" 1989))
(DECLARE\: DONTCOPY
  (FILEMAP (NIL (511 2381 (FIX-FILES 521 . 2379)))))
STOP
