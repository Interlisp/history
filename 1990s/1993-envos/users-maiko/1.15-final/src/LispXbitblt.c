/* @(#) LispXbitblt.c Version 1.1 (3/1/90). copyright venue & Fuji Xerox  */static char *id = "@(#) LispXbitblt.c	1.1 3/1/90	(venue & Fuji Xerox)";/**** Copyright (C) 1988 by Fuji Xerox co.,Ltd. All rights reserved.**		Author: Mitsunori Matsuda*		Date  : August 11, 1988**/#include <stdio.h>#include <X11/Xlib.h>#include <X11/Xutil.h>#include "XVersion.h"#include "MyWindow.h"#define FALSE 0#define TRUE  !FALSEextern Display *Xdisplay;extern XImage XScreenBitmap;extern MyWindow Lisp_Window	      , Display_Window;extern DisplayArea ScreenRegion;#define Xbitblt(x,y,w,h) { \		XPutImage( Xdisplay, Display_Window.win \			, *(Display_Window.gc) \			, &XScreenBitmap \			, x \			, y \			, x - ScreenRegion.left_x \			, y - ScreenRegion.top_y \			, w \			, h ); \	/*	XFlush( Xdisplay ); */	 \} clipping_Xbitblt(x,y,w,h)int x  , y  , w  , h;{ #ifdef TRACE	printf( "TRACE: clipping_Xbitblt()\n" );#endif	int temp_x 	  , temp_y; 	temp_x = x + w - 1; 	temp_y = y + h - 1; 	if( ( temp_x < ScreenRegion.left_x ) 	 || ( x > ScreenRegion.right_x ) 	 || ( temp_y < ScreenRegion.top_y ) 	 || ( y > ScreenRegion.bottom_y ) ) { 		return; 	} 		if( ( x >= ScreenRegion.left_x ) 	 && ( temp_x <= ScreenRegion.right_x ) 	 && ( y >= ScreenRegion.top_y ) 	 && ( temp_y <= ScreenRegion.bottom_y ) ) { 		Xbitblt( x, y, w, h ); 		return; 	} 	if( x < ScreenRegion.left_x ) { 		w -= ScreenRegion.left_x - x; 		x = ScreenRegion.left_x; 	} 	if( temp_x > ScreenRegion.right_x ) { 		w -= temp_x - ScreenRegion.right_x; 	} 	if( y < ScreenRegion.top_y ) { 		h -= ScreenRegion.top_y - y; 		y = ScreenRegion.top_y; 	} 	if( temp_y > ScreenRegion.bottom_y ) { 		h -= temp_y - ScreenRegion.bottom_y; 	} 	if( ( w>0 ) && ( h>0 ) ) { 		Xbitblt( x, y, w, h ); 	} } /* end clipping_Xbitblt */refresh_Xscreen(){#ifdef TRACE	printf( "TRACE: refresh_Xscreen()\n" );#endif	Xbitblt( ScreenRegion.left_x		, ScreenRegion.top_y		, Display_Window.width		, Display_Window.height );} /* end refresh_Xscreen */