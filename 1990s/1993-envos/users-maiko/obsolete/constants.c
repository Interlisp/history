/* This is G-file @(#) constants.c Version 1.2 (3/13/88). copyright Xerox & Fuji Xerox  */static char *id = "@(#) constants.c	1.2 3/13/88";/* *	Copyright (C) 1987 by Fuji Xerox Co., Ltd. All rights reserved. * *	Auther :  Takeshi Shimizu * *//**********************************************************************//* 		File Name :	constants.c		Desc	:	constants management  					Date :		Apr 13, 1987 					Edited by :	Naoyuki Mitani 		Including :	OP_aconst				OP_nil				OP_t				OP_zero				OP_one				OP_sicx				OP_snic				OP_sic				OP_gconst					*//**********************************************************************/#include "lispemul.h"#include "lispmap.h"#include "stack.h"#include "emulglobal.h"extern LispPTR TopOfStack;extern DLword *CurrentStackPTR ;extern ByteCode *PC ;extern DLword  *LastStackAddr;/**********************************************************************//*		Func name :	OP_aconst				Push TOS to the current stack and set the 				atomindex specified with  alpha and beta 				to TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani					Changed by:	Naoyuki Mitani(28-Apr)*//**********************************************************************/OP_aconst(){ DLword atom_index;#ifdef TRACE	printPC();	printf("TRACE: OP_aconst()\n");#endif PushCStack; atom_index = (Get_BYTE(PC + 1) << 8) | Get_BYTE(PC + 2); 	/* Get atomindex with alpha and beta */ TopOfStack = atom_index; PC = PC + 3; if (StackCheck)	StackOverflow;}/* end OP_aconst *//**********************************************************************//*		Func name :	OP_nil				Push TOS to the current stack and set the 				atomindex of NIL to TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani*//**********************************************************************/OP_nil(){#ifdef TRACE	printPC();	printf("TRACE: OP_nil()\n");#endif PushCStack; PC++; TopOfStack = NIL_PTR; if (StackCheck)	StackOverflow;}/* end OP_nil *//**********************************************************************//*		Func name :	OP_t				Push TOS to the current stack and set the 				atomindex of T to TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani*//**********************************************************************/OP_t(){#ifdef TRACE	printPC();	printf("TRACE: OP_t()\n");#endif PushCStack; PC++; TopOfStack = ATOM_T; if (StackCheck)	StackOverflow;}/* end OP_t *//**********************************************************************//*		Func name :	OP_zero				Push TOS to the current stack and set the 				lisp pointer of 16 bit integer 0 .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani*//**********************************************************************/OP_zero(){#ifdef TRACE	printPC();	printf("TRACE: OP_zero()\n");#endif PushCStack; PC++; TopOfStack = S_POSITIVE; if (StackCheck)	StackOverflow;}/* end OP_zero *//**********************************************************************//*		Func name :	OP_one				Push TOS to the current stack and set the 				lisp pointer of 16 bit integer 1 .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani*//**********************************************************************/OP_one(){#ifdef TRACE	printPC();	printf("TRACE: OP_one()\n");#endif PushCStack; PC++; TopOfStack = S_POSITIVE | 1; if (StackCheck)	StackOverflow;}/* end OP_one *//**********************************************************************//*		Func name :	OP_sicx				Push TOS to the current stack and set the 				lisp pointer of 16 bit integer specified 				with alpha and beta to TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani					Changed by:	Naoyuki Mitani(28-Apr)*//**********************************************************************/OP_sicx(){ DLword value;		/* 16 bit integer specified with alpha and beta */#ifdef TRACE	printPC();	printf("TRACE: OP_sicx()\n");#endif PushCStack; value = (Get_BYTE(PC + 1) << 8) | Get_BYTE(PC + 2);		/* Get 16 bit integer specified with alpha and beta */ TopOfStack = S_POSITIVE | value; PC=PC+3; if (StackCheck)	StackOverflow;}/* end OP_sicx *//**********************************************************************//*		Func name :	OP_snic				Push TOS to the current stack . And set the 				lisp pointer of 16 bit negative integer 				transrated from 8bit integer specified with 				alpha to TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani					Changed by:	Naoyuki Mitani(28-Apr)*//**********************************************************************/OP_snic(){#ifdef TRACE	printPC();	printf("TRACE: OP_snic()\n");#endif PushCStack; TopOfStack = S_NEGATIVE | 0xff00 | Get_BYTE(PC + 1);	/* Transrate 8bit integer specified with alpha to 16 bit negative	integer */ PC = PC + 2; if (StackCheck)	StackOverflow;}/* end OP_snic *//**********************************************************************//*		Func name :	OP_sic				Push TOS to the current stack . And set the 				lisp pointer of 16 bit integer transrated 				from 8bit integer specified with alpha to 				TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani					Changed by:	Naoyuki Mitani(28-Apr)*//**********************************************************************/OP_sic(){#ifdef TRACE	printPC();	printf("TRACE: OP_sic()\n");#endif PushCStack; TopOfStack = S_POSITIVE | Get_BYTE (PC + 1);	/* Transrate 8bit integer specified with alpha to 16 bit integer */ PC = PC + 2; if (StackCheck)	StackOverflow;}/* end OP_sic *//**********************************************************************//*		Func name :	OP_gconst				Push TOS to the current stack . And set 				the 24bit data specified with alpha beta 				and gamma to TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani					Changed by:	Naoyuki Mitani(28-Apr)*//**********************************************************************/OP_gconst(){#ifdef TRACE	printPC();	printf("TRACE: OP_gconst()\n");#endif PushCStack; TopOfStack = (Get_BYTE(PC + 1) << 16) | (Get_BYTE(PC + 2) << 8) | 		Get_BYTE(PC +  3);	/* Transrate 24bit data specified with alpha beta and gamma to 	16 bit integer */ PC = PC + 4; if (StackCheck)	StackOverflow;}/* end OP_gconst */