/* This is G-file @(#) array4.c Version 2.6 (7/6/88). copyright Xerox & Fuji Xerox  */static char *id = "@(#) array4.c	2.6 7/6/88";/*	array4.c */#include <stdio.h>#include "lispemul.h"#include "lispglobal.h"#include "address68k.h"#include "lispmap.h"#include "lisptypes.h"#include "arith.h"#include "gc.h"#include "my.h"/***	N_OP_aset1   -- op 267   (new-value array index)   ***/N_OP_aset1(data, arrayarg, inx, error_addr)int *error_addr;register int inx;LispPTR arrayarg;register LispPTR data;{register int type;register DLword *arrayblk;register LispPTR base;register int new;register int index;      /*  verify array  */      if (GetTypeNumber(arrayarg) != TYPE_ONED_ARRAY) ERROR_EXIT(error_addr);      arrayblk = Addr68k_from_LADDR(arrayarg);      /*  test and setup index  */      N_GetPos(inx, index, error_addr);      if (index >= *((DLword *)(arrayblk + 5))) ERROR_EXIT(error_addr);      index += *((DLword *)(arrayblk + 3));      /*  setup typenumber  */      type = 0xFF & *((DLword *)(arrayblk + 2));      /*  setup base  */      base = *((LispPTR *)(arrayblk));      /*  disp on type  */      aset_switch(type, error_addr);doufn:		ERROR_EXIT(error_addr);} /*  end N_OP_aset1()  */