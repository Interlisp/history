ref-20-5                    Xerox Quintus Prolog Reference Manual               Section 20-5: Last Clause Determinacy DetectionEven if the determinacy detection made possible by indexing (see{manual(ref-20-4-2)}) is unavailable to a procedure call, Xerox Quintus Prologstill can detect determinacy before determinate exit from the procedure.  Spacefor backtracking information can thus be recovered as early as possible,reducing memory requirements and increasing performance.  For instance, thepredicate member/2 (defined in the Xerox Quintus Prolog library) is defined by            member(Element, [Element|_]).            member(Element, [_|Rest] :-                    member(Element, Rest).member/2 might be called with an instantiated first argument in order to checkfor membership of the argument in a list, which is passed as a second argument,as in            | ?- member(4, [1,2,3,4]).The first arguments of both clauses of member/2 are variables, so firstargument indexing cannot be used.  However, determinacy can still be detectedbefore determinate exit from the procedure.  This is because on entry to thelast clause of a nondeterminate procedure, a call becomes effectivelydeterminate; it can tell that it has no more clauses to backtrack to.  Thus,backtracking information is no longer needed, and its space can be reclaimed.In the example, each time a call fails to match the first clause and backtracksto the second (last) clause, backtracking information for the call isautomatically deleted.Because of last clause determinacy detection, a cut is never needed in the lastclause of a procedure.  Backtracking information will have been deleted beforea cut in the last clause is executed, so the cut will have no effect except towaste time.Note that last clause determinacy detection is exploited by interpreted code aswell as compiled code in Release 2.0 of Xerox Quintus Prolog.  Prior to Release2.0, space for backtracking information was reclaimed only on determinate exitfrom an interpreted procedure.