(DEFINE-FILE-INFO READTABLE "XCL" PACKAGE "INTERLISP")(FILECREATED "10-Sep-87 13:20:13" {DSK}<LISPFILES>DCOMS>LLSH.\;2 3830         |changes| |to:|  (OPTIMIZERS LLSH LRSH)      |previous| |date:| " 9-Sep-87 17:06:21" {DSK}<LISPFILES>DCOMS>LLSH.\;1); Copyright (c) 1987 by Quintus Computer Systems, Inc.  All rights reserved.(PRETTYCOMPRINT LLSHCOMS)(RPAQQ LLSHCOMS ((* |;;;| "This file has optimizers for LLSH and LRSH for the common cases where the number of bits to shift are known at compile-time.  In this case, it compiles the shortest sequence of LLSH8 and LLSH1 (LRSH8 and LRSH1) to accomplish the desired shift.  This has worked in the old Interlisp compiler for a long time, but somehow got left out of the CL compiler in Lyric.  These optimizations should be incorporated in the next Xerox Lisp release, so this file should be obsolete then.")                 (OPTIMIZERS LLSH LRSH)))(* |;;;| "This file has optimizers for LLSH and LRSH for the common cases where the number of bits to shift are known at compile-time.  In this case, it compiles the shortest sequence of LLSH8 and LLSH1 (LRSH8 and LRSH1) to accomplish the desired shift.  This has worked in the old Interlisp compiler for a long time, but somehow got left out of the CL compiler in Lyric.  These optimizations should be incorporated in the next Xerox Lisp release, so this file should be obsolete then.")(DEFOPTIMIZER LLSH (XCL-USER::X XCL-USER::N) (* |;;;| "Optimize LLSH when the number of bits to shift is known at compile-time.") (CL:IF COMPILER::*NEW-COMPILER-IS-EXPANDING*        (LET ((XCL-USER::M (AND (CL:CONSTANTP XCL-USER::N)                                (CL:EVAL XCL-USER::N))))             (CL:IF (TYPEP XCL-USER::M '(INTEGER 0))                    (LET ((XCL-USER::FORM XCL-USER::X))                         (CL:LOOP (CL:IF (< XCL-USER::M 8)                                         (RETURN NIL))                                (CL:SETQ XCL-USER::FORM `((OPCODES LLSH8)                                                          ,XCL-USER::FORM))                                (CL:DECF XCL-USER::M 8))                         (CL:LOOP (CL:IF (<= XCL-USER::M 0)                                         (RETURN NIL))                                (CL:SETQ XCL-USER::FORM `((OPCODES LLSH1)                                                          ,XCL-USER::FORM))                                (CL:DECF XCL-USER::M 1))                         XCL-USER::FORM)                    'COMPILER:PASS))        'COMPILER:PASS))(DEFOPTIMIZER LRSH (XCL-USER::X XCL-USER::N) (* |;;;| "Optimize LRSH when the number of bits to shift is known at compile-time.") (CL:IF COMPILER::*NEW-COMPILER-IS-EXPANDING*        (LET ((XCL-USER::M (AND (CL:CONSTANTP XCL-USER::N)                                (CL:EVAL XCL-USER::N))))             (CL:IF (TYPEP XCL-USER::M '(INTEGER 0))                    (LET ((XCL-USER::FORM XCL-USER::X))                         (CL:LOOP (CL:IF (< XCL-USER::M 8)                                         (RETURN NIL))                                (CL:SETQ XCL-USER::FORM `((OPCODES LRSH8)                                                          ,XCL-USER::FORM))                                (CL:DECF XCL-USER::M 8))                         (CL:LOOP (CL:IF (<= XCL-USER::M 0)                                         (RETURN NIL))                                (CL:SETQ XCL-USER::FORM `((OPCODES LRSH1)                                                          ,XCL-USER::FORM))                                (CL:DECF XCL-USER::M 1))                         XCL-USER::FORM)                    'COMPILER:PASS))        'COMPILER:PASS))(PUTPROPS LLSH COPYRIGHT ("Quintus Computer Systems, Inc" 1987))(DECLARE\: DONTCOPY  (FILEMAP (NIL)))STOP