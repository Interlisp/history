(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "XCL" BASE 10)(filecreated "15-Oct-87 15:42:59" {dsk}<lispfiles>dcoms>instrs.\;2 64728        |changes| |to:|  (vars instrscoms)                       (variables xqp::unimplemented.instructions)      |previous| |date:| "15-Jul-87 19:47:10" {dsk}<lispfiles>dcoms>instrs.\;1); Copyright (c) 1987 by Quintus Computer Systems, Inc.  All rights reserved.(prettycomprint instrscoms)(rpaqq instrscoms ((* |;;;| "This file was generated from {ERIS}<PROLOGCORE>LISPNEW>INSTRS.LSP;1, loaded 12-Jun-87 18:57:12")                                       (* |;;| "SCCS   : @(#)INSTRS.LSP	8204.1 3/25/87 File   : xerox.d/instrs.lsp Author : Richard A. O'Keefe Purpose: Describe all the instructions currently implemented")                                       (* |;;| "Each instruction is described by a line (instruction	mode	arguments)	; mode file line which describes the SOURCE form of the instruction in a .DNG file and says whereabouts in the emulator it is defined.  The line numbers are getting out of date, I shall have to maintain them by hand.  The meaning of the argument descriptions is  byte		-- an 8-bit literal value size		-- a 16-bit literal for instruction word <<3>> word		-- a 16-bit literal for instruction word 2 atom		-- a 16-bit atom address, source has the symbol cell		-- a 32-bit tagged cell, source has a constant a1		-- an 8-bit A register number for instr word 1 a2		-- an 8-bit A register number for instr word 2 y1		-- an 8-bit Y variable number for instr word 1 y2		-- an 8-bit Y variable number for instr word 2 clause		-- a 24-bit clause pointer (no source form) procedure	-- a 24-bit procedure pointer (atom arity module) offset		-- a 24-bit instruction pointer (+offset) extend		-- this is a 2-byte instruction, there are no args, or one word, or one cell. *		-- this is the AiM version of the previous instr  No argument information means that the instruction has no arguments, but is so common that it should not be an \"extend\"ed form.")                                       (* |;;| "QP.opcode is an array of function names. Instructions are numbered 2, 4, 6, ..., 252. Instruction 0 is a fault, and instruction 254 is for debugging. QP.opcode[I+0] is the  read-mode handler for instruction I. QP.opcode[I+1] is the write-mode handler for instruction I. extendR and extendW are blocks of 16-bit atom numbers, for use in R.extend and W.extend respectively.")                   (variables xqp::|QP.opcode| xqp::|extendR| xqp::|extendW| xqp::instruction.harray                           xqp::extension.harray xqp::permanent.offset xqp::extension.opcode)                                       (* |;;| "This is used in PUTIL to initialize PROLOG.ENABLE.PUFN.TABLE.  If something is missing from this list, it's no big deal.  However, if you put something in here that shouldn't be, you've disabled the microcode for this instruction when it follows a real unimplemented instruction. ")                   (variables xqp::unimplemented.instructions)                                       (* |;;| "(OP.CODE name) is given the symbolic name of a Prolog instruction as an atom, and returns the (read-mode) number of that instruction.")                   (functions xqp::op.code)                                       (* |;;| "(DESCRIBE.INSTRUCTIONS list-of-descriptions) is called with one argument: a complete list of the Quintus Prolog instructions and their argument types.  (The comment saying which modes an instruction exists in should perhaps move into the data.) It initialises INSTRUCTION.HARRAY with the information, and assigns specific opcodes to the instructions.  It also maintains QP.opcode, which used to be done by loading, but that ran into the usual difficulties with the file package.  As a consequence of the new way of initialising QP.opcode, it will have some W.xxx entries which do not correspond to real functions, but that does no harm.")                   (functions xqp::describe.instructions)                   (* |;;;| "IMPORTANT:  Because of the way the loader works, AiM/XnM instructions MUST immediately follow their corresponding Ai/Xn instruction, with args listed as just \"*\".  This applies to singlemode instructions, too, except - and this is EXTREMELY important - the Ai/Xn instruction must be on an ODD opcode.  This means it must be preceded by a block of an odd number of singlemode instructions.")                   (functions xqp::|init.instrs|)                   (p (xqp::|init.instrs|))                                       (* |;;| "The following function prints a table of instruction numbers so that parts of the Prolog system which need these numbers can be updated.")                   (functions xqp::|list.instrs|)                   (prop makefile-environment)))(* |;;;| "This file was generated from {ERIS}<PROLOGCORE>LISPNEW>INSTRS.LSP;1, loaded 12-Jun-87 18:57:12")(* |;;| "SCCS   : @(#)INSTRS.LSP	8204.1 3/25/87 File   : xerox.d/instrs.lsp Author : Richard A. O'Keefe Purpose: Describe all the instructions currently implemented")(* |;;| "Each instruction is described by a line (instruction	mode	arguments)	; mode file line which describes the SOURCE form of the instruction in a .DNG file and says whereabouts in the emulator it is defined.  The line numbers are getting out of date, I shall have to maintain them by hand.  The meaning of the argument descriptions is  byte		-- an 8-bit literal value size		-- a 16-bit literal for instruction word <<3>> word		-- a 16-bit literal for instruction word 2 atom		-- a 16-bit atom address, source has the symbol cell		-- a 32-bit tagged cell, source has a constant a1		-- an 8-bit A register number for instr word 1 a2		-- an 8-bit A register number for instr word 2 y1		-- an 8-bit Y variable number for instr word 1 y2		-- an 8-bit Y variable number for instr word 2 clause		-- a 24-bit clause pointer (no source form) procedure	-- a 24-bit procedure pointer (atom arity module) offset		-- a 24-bit instruction pointer (+offset) extend		-- this is a 2-byte instruction, there are no args, or one word, or one cell. *		-- this is the AiM version of the previous instr  No argument information means that the instruction has no arguments, but is so common that it should not be an \"extend\"ed form.")(* |;;| "QP.opcode is an array of function names. Instructions are numbered 2, 4, 6, ..., 252. Instruction 0 is a fault, and instruction 254 is for debugging. QP.opcode[I+0] is the  read-mode handler for instruction I. QP.opcode[I+1] is the write-mode handler for instruction I. extendR and extendW are blocks of 16-bit atom numbers, for use in R.extend and W.extend respectively.")(xqp::|def.global| xqp::|QP.opcode| )(xqp::|def.global| xqp::|extendR| )(xqp::|def.global| xqp::|extendW| )(xqp::|def.global| xqp::instruction.harray )(xqp::|def.global| xqp::extension.harray )(xqp::|def.global| xqp::permanent.offset )(xqp::|def.global| xqp::extension.opcode )(* |;;| "This is used in PUTIL to initialize PROLOG.ENABLE.PUFN.TABLE.  If something is missing from this list, it's no big deal.  However, if you put something in here that shouldn't be, you've disabled the microcode for this instruction when it follows a real unimplemented instruction. ")(defglobalparameter xqp::unimplemented.instructions '(xqp::|call.lisp| xqp::|deallocate|                                                             xqp::|get.Ai.boxed| xqp::|get.AiM.boxed|                                                             xqp::|get.AiM.constant|                                                             xqp::|get.Ai.float| xqp::|get.AiM.float|                                                             xqp::|get.AiM.list| xqp::|get.AiM.nil|                                                             xqp::|get.AiM.structure|                                                             xqp::|get.AiM.symbol|                                                             xqp::|get.AiM.value.Xn|                                                             xqp::|get.Ai.value.XnM|                                                             xqp::|get.AiM.value.XnM|                                                             xqp::|get.AiM.value.Yn|                                                             xqp::|put.AiM.constant|                                                             xqp::|put.AiM.list|                                                             xqp::|put.AiM.structure|                                                             xqp::|put.AiM.symbol|                                                             xqp::|put.AiM.unsafe.Yn|                                                             xqp::|put.Ai.value.XnM|                                                             xqp::|put.AiM.value.Xn|                                                             xqp::|put.AiM.value.XnM|                                                             xqp::|put.AiM.variable.Yn|                                                             xqp::|put.AiM.void|                                                             xqp::|send.variable.Ai|                                                             xqp::|send.variable.AiM|                                                             xqp::|start.calling|                                                             xqp::|store.value.Yn|                                                             xqp::|store.value.Xn|                                                             xqp::|store.value.XnM|                                                             xqp::|add.neg.word| xqp::|check.heap|                                                             xqp::|unify.boxed| xqp::|unify.float|                                                             xqp::|unify.structure|                                                             xqp::|unify.value.XnM|                                                             xqp::|unify.variable.XnM|                                                             xqp::|send.direct.Ai|                                                             xqp::|send.direct.AiM| xqp::|trap| |arg|                                                             xqp::|functor| xqp::|settopval|                                                             xqp::|get.addr|)                                          "Names of Prolog instructions that have not been microcoded"   )(* |;;| "(OP.CODE name) is given the symbolic name of a Prolog instruction as an atom, and returns the (read-mode) number of that instruction.")(xqp::|def.subr| xqp::op.code (instruction) (|if| (gethash instruction xqp::extension.harray)                         (                      |then| (iplus (gethash instruction            (ชชบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบ&ออๅแ๖๔ง8ตงฆ๕?๕ฝตฉบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบ๛ทฉบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบบQฏ๔ท8๔฿U๕ฆ๗๔รตRN (XQP::|fast.fail|))))(XQP::|def.both.mode| XQP::|get.Ai.boxed| (XQP::|areg| XQP::|cell|)   (XQP::|put.32| T1 (XQP::|get.Aval| N))   (XQP::|put.32| XQP::T0 (XQP::|cell.operand|))   (XQP::|select.16| T1 (XQP::|ref.tag.8| (XQP::|put.24| C (XQP::|untag.ref| T1))                               (XQP::|put.32| T1 (XQP::|get.cell| C 0))                               (XQP::|reselect.when.bound| T1 C)                               (XQP::|bind.either| C XQP::T0)                               (XQP::|continue| 2))          (XQP::|boxed.tag.8| (|if| (EQP (XQP::|get.nb| XQP::T0)                                         (XQP::|get.nb| T1))                                  |then| (XQP::|continue| 2)                                |else| (XQP::|fast.fail|)))          (PROGN (XQP::|fast.fail|))))(XQP::|def.both.mode| XQP::|get.Ai.constant| (XQP::|areg| XQP::|cell|)   (XQP::|put.32| T1 (XQP::|get.Aval| N))   (XQP::|put.32| XQP::T0 (XQP::|cell.operand|))   (XQP::|select.4| T1 (XQP::|ref.tag.8| (XQP::|put.24| C (XQP::|untag.ref| T1))                              (XQP::|put.32| T1 (XQP::|get.cell| C 0))                              (XQP::|reselect.when.bound| T1 C)                              (XQP::|bind.either| C XQP::T0)                              (XQP::|continue| 2))          (PROGN (|if| (XQP::|same.cell| XQP::T0 T1)                     |then| (XQP::|continue| 2)                   |else| (XQP::|fast.fail|)))))(XQP::|def.both.mode| XQP::|get.Ai.float| (XQP::|areg| XQP::|cell|)   (XQP::|put.32| T1 (XQP::|get.Aval| N))   (XQP::|put.32| XQP::T0 (XQP::|cell.operand|))   (XQP::|select.16| T1 (XQP::|ref.tag.8| (XQP::|put.24| C (XQP::|untag.ref| T1))                               (XQP::|put.32| T1 (XQP::|get.cell| C 0))                               (XQP::|reselect.when.bound| T1 C)                               (XQP::|bind.either| C XQP::T0)                               (XQP::|continue| 2))          (XQP::|float.tag.8| (|if| (XQP::|same.cont| XQP::T0 T1)                                  |then| (XQP::|continue| 2)                                |else| (XQP::|fast.fail|)))          (PROGN (XQP::|fast.fail|))))(XQP::|def.both.mode| XQP::|get.Ai.list| (XQP::|areg|) (XQP::|put.32| T1 (XQP::|get.Aval| N))                                                       (XQP::|select.4| T1                                                              (XQP::|ref.tag.8| (XQP::|put.24|                                                                                 C                                                                                 (XQP::|untag.ref|                                                                                  T1))                                                                     (XQP::|put.32| T1                                                                            (XQP::|get.cell| C 0))                                                                     (XQP::|reselect.when.bound|                                                                      T1 C)                                                                     (XQP::|put.32| XQP::T0                                                                            (XQP::|tag.list| H))                                                                     (XQP::|bind.either| C XQP::T0)                                                                     (XQP::|continue.writing| 0))                                                              (XQP::|list.tag.8| (XQP::|put.24|                                                                                  S                                                                                  (XQP::|untag.list|                                                                                   T1))                                                                     (XQP::|continue.reading| 0))                                                              (XQP::|fast.fail|)))(XQP::|def.both.mode| XQP::|get.Ai.nil| (XQP::|areg|) (XQP::|put.32| T1 (XQP::|get.Aval| N))                                                      (XQP::|put.32| XQP::T0 (XQP::|tag.symbol|                                                                              NIL))                                                      (XQP::|select.4|                                                       T1                                                       (XQP::|ref.tag.8| (XQP::|put.24| C                                                                                (XQP::|untag.ref|                                                                                 T1))                                                              (XQP::|put.32| T1 (XQP::|get.cell|                                                                                 C 0))                                                              (XQP::|reselect.when.bound| T1 C)                                                              (XQP::|bind.either| C XQP::T0)               ray)                           (seta xqp::|QP.opcode| counter (pack* xqp::mode1 instr))                           (setq counter (add1 counter))                           (|if| xqp::mode2                               |then| (seta xqp::|QP.opcode| counter (pack* xqp::mode2 instr))                                     (setq counter (add1 counter)))                   |else|                     (* |;;| "ordinary instruction")                         (|if| (and xqp::mode2 (oddp counter))                             |then| (shouldnt "odd singlemode instruction block"))                         (setq last instr)                     (* |;;| "for (x *) instructions")                         (puthash instr counter xqp::instruction.harray)                         (puthash counter (let ((second (cadr argtypes)))                                               (|if| (null first)                                                   |then| (list instr)                                                 |elseif| (null second)                                                   |then| (list instr first argtypes)                                                 |else| (list instr (pack* first '\. second)                                                              argtypes)))                                xqp::instruction.harray)                         (seta xqp::|QP.opcode| counter (pack* xqp::mode1 instr))                         (setq counter (add1 counter))                         (|if| xqp::mode2                             |then| (seta xqp::|QP.opcode| counter (pack* xqp::mode2 instr))                                   (setq counter (add1 counter)))))))(* |;;;| "IMPORTANT:  Because of the way the loader works, AiM/XnM instructions MUST immediately follow their corresponding Ai/Xn instruction, with args listed as just \"*\".  This applies to singlemode instructions, too, except - and this is EXTREMELY important - the Ai/Xn instruction must be on an ODD opcode.  This means it must be preceded by a block of an odd number of singlemode instructions.")(xqp::|def.subr| xqp::|init.instrs| nil (xqp::describe.instructions '(                                                             (* \;              "INSTRUCTION		MODE	ARGS		MODE	FILE		LINE -------------		----	----		----	----------	----")                                                                      (xqp::|extend| |double| |byte|)                                                             (* \; "both	interpret.lsp")                                                                      (|add| |both| xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|allocate| |both|)                                                             (* \; "both	call.lsp	 18")                                                                      (xqp::|body.cut| |both|)                                                             (* \; "both	cut.lsp	 74")                                                                      (xqp::|boolean.and| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|boolean.not| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|boolean.or| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|boolean.xor| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (|call| |both| xqp::|size|                                                                              xqp::|procedure|)                                                             (* \; "both	call.lsp	148")                                                                      (xqp::|call.lisp| |double|                                                                              |byte|)                                                             (* \; "read	lisp.lsp")                                                                      (xqp::|compare| |both|                                                                              xqp::|extend|)                                                             (* \; "both	meta.lsp	301")                                                                      (xqp::|cut.proceed| |both|)                                                             (* \; "both	cut.lsp	 	 84")                                                                      (xqp::|deallocate| |both|)                                                             (* \; "both	call.lsp	 81")                                                                      (xqp::|depart| |both|                                                                              xqp::|procedure|)                                                             (* \; "both	call.lsp	137")                                                                      (xqp::|depart.cut| |both|)                                                             (* \; "both	cut.lsp	 	 95")                                                                      (xqp::|divide| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (|either| |both| xqp::|size|                                                                              |offset|)                                                             (* \; "both	index.lsp	 89")                                                                      (xqp::|equal.to.else| |single|                                                                              |offset|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|equal.to| |single|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|execute| |both|                                                                              xqp::|procedure|)                                                             (* \; "both	call.lsp	128")                                                                      (xqp::|fail| |both|)                                                             (* \; "both	fail.lsp	 59")                                                                      (|fix| |both| xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|float| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|get.Ai.boxed| |both|                                                                              xqp::\a1 |cell|)                                                             (* \; "both	getread.lsp	448")                                                                      (xqp::|get.AiM.boxed| |both| *)                                                             (* \; "both	getread.lsp	448")                                                                      (xqp::|get.Ai.constant| |both|                                                                              xqp::\a1 |cell|)                                                             (* \; "both	getread.lsp	405")                                                                      (xqp::|get.AiM.constant| |both|                                                                              *)                                                             (* \; "both	getread.lsp	405")                                                                      (xqp::|get.Ai.float| |both|                                                                              xqp::\a1 |cell|)                                                             (* \; "both	getread.lsp	494")                                                                      (xqp::|get.AiM.float| |both| *)                                                             (* \; "both	getread.lsp	494")                                                                      (xqp::|get.Ai.list| |both|                                                                              xqp::\a1)                                                             (* \; "both	getread.lsp	621")                                                                      (xqp::|get.AiM.list| |both| *)                                                             (* \; "both	getread.lsp	621")                                                                      (xqp::|get.Ai.nil| |both|                                                                              xqp::\a1)                                                             (* \; "both	getread.lsp	579")                                                                      (xqp::|get.AiM.nil| |both| *)                                                             (* \; "both	getread.lsp	579")                                                                      (xqp::|get.Ai.structure| |both|                                                                              xqp::\a1 xqp::|functor|)                                                             (* \; "both	getread.lsp	657")                                                                      (xqp::|get.AiM.structure|                                                                       |both| *)                                                             (* \; "both	getread.lsp	657")                                                                      (xqp::|get.Ai.symbol| |both|                                                                              xqp::\a1 |atom|)                                                             (* \; "both	getread.lsp	544")                                                                      (xqp::|get.AiM.symbol| |both| *                                                                             )                                                             (* \; "both	getread.lsp	544")                                                                      (xqp::|get.Ai.value.Xn| |both|                                                                              xqp::\a1 xqp::\a2)                                                             (* \; "both	getread.lsp	313")                                                                      (xqp::|get.AiM.value.Xn| |both|                                                                              *)                                                             (* \; "both	getread.lsp	313")                                                                      (xqp::|get.Ai.value.XnM| |both|                                                                              *)                                                             (* \; "both	getread.lsp	313")                                                                      (xqp::|get.AiM.value.XnM|                                                                       |both| *)                                                             (* \; "both	getread.lsp	313")                                                                      (xqp::|get.Ai.value.Yn| |both|                                                                              xqp::\a1 \y2)                                                             (* \; "both	getread.lsp	347")                                                                      (xqp::|get.AiM.value.Yn| |both|                                                                              *)                                                             (* \;                                      "both	getread.lsp	347 get.Ai.variable.Xn	both	= put.Ai.value.Xn")                                                                      (xqp::|get.Ai.variable.Yn|                                                                       |both| xqp::\a1 \y2)                                                             (* \; "both	getread.lsp	291")                                                                      (xqp::|get.AiM.variable.Yn|                                                                       |both| *)                                                             (* \; "both	getread.lsp	291")                                                                      (xqp::|greater.than.else|                                                                       |single| |offset|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|greater.than| |single|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|head.cut| |both|)                                                             (* \; "both	cut.lsp	 64")                                                                      (xqp::|initialize.Yn| |both|                                                                              \y1)                                                             (* \; "both	putwrite.lsp	 24")                                                                      (xqp::|integer.divide| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|is.a| |both| |byte|)                                                             (* \; "both	meta.lsp	 20")                                                                      (xqp::|jump.to| |both| |offset|                                                                             )                                                             (* \; "both	index.lsp	110")                                                                      (xqp::|just.me.else| |double|                                                                              xqp::|clause|)                                                             (* \; "read	index.lsp	 64")                                                                      (xqp::|left.shift| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|less.than.else| |single|                                                                              |offset|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|less.than| |single|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|load.constant| |both|                                                                              xqp::|extend| |cell|)                                                             (* \; "both	arith.lsp	303")                                                                      (xqp::|load.neg.word| |both|                                                                              xqp::|extend| |word|)                                                             (* \; "both	arith.lsp	321")                                                                      (xqp::|load.pos.word| |both|                                                                              xqp::|extend| |word|)                                                             (* \; "both	arith.lsp	315")                                                                      (xqp::|load.value.Xn| |both|                                                                              xqp::\a1)                                                             (* \; "both	arith.lsp	251")                                                                      (xqp::|load.value.XnM| |both| *                                                                             )                                                             (* \; "both	arith.lsp	251")                                                                      (xqp::|load.value.Yn| |both|                                                                              \y1)                                                             (* \; "both	arith.lsp	271")                                                                      (xqp::|minus| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp	 90")                                                                      (xqp::|modulus| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (|multiply| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|not.equal.to.else|                                                                       |single| |offset|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|not.equal.to| |single|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|not.less.than.else|                                                                       |single| |offset|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|not.less.than| |single|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|not.greater.than.else|                                                                       |single| |offset|)                                                             (* \; "single arith.lsp")                                                                      (xqp::|not.greater.than|                                                                              |single|)                                                             (* \; "single	arith.lsp")                                                                      (|or| |double| |offset|)                                                             (* \; "read	index.lsp	132")                                                                      (xqp::|or.finally| |double|)                                                             (* \; "read	index.lsp	138")                                                                      (xqp::|proceed| |both|)                                                             (* \; "both	call.lsp	133")                                                                      (xqp::|progress| |both|)                                                             (* \; "both	call.lsp	141")                                                                      (xqp::|put.Ai.constant| |both|                                                                              xqp::\a1 |cell|)                                                             (* \; "both	putwrite.lsp	188")                                                                      (xqp::|put.AiM.constant| |both|                                                                              *)                                                             (* \; "both	putwrite.lsp	188")                                                                      (xqp::|put.Ai.list| |both|                                                                              xqp::\a1)                                                             (* \; "both	putwrite.lsp	255")                                                                      (xqp::|put.AiM.list| |both| *)                                                             (* \; "both	putwrite.lsp	255")                                                                      (xqp::|put.Ai.nil| |both|                                                                              xqp::\a1)                                                             (* \; "both	putwrite.lsp	207")                                                                      (xqp::|put.AiM.nil| |both| *)                                                             (* \; "both	putwrite.lsp	207")                                                                      (xqp::|put.Ai.structure| |both|                                                                              xqp::\a1 xqp::|functor|)                                                             (* \; "both	putwrite.lsp	275")                                                                      (xqp::|put.AiM.structure|                                                                       |both| *)                                                             (* \; "both	putwrite.lsp	275")                                                                      (xqp::|put.Ai.symbol| |both|                                                                              xqp::\a1 |atom|)                                                             (* \; "both	putwrite.lsp	228")                                                                      (xqp::|put.AiM.symbol| |both| *                                                                             )                                                             (* \; "both	putwrite.lsp	228")                                                                      (xqp::|put.Ai.unsafe.Yn| |both|                                                                              xqp::\a2 \y1)                                                             (* \; "both	putwrite.lsp	162")                                                                      (xqp::|put.AiM.unsafe.Yn|                                                                       |both| *)                                                             (* \; "both	putwrite.lsp	162")                                                                      (xqp::|put.Ai.value.Xn| |both|                                                                              xqp::\a2 xqp::\a1)                                                             (* \; "both	putwrite.lsp	135")                                                                      (xqp::|put.Ai.value.XnM| |both|                                                                              *)                                                             (* \; "both	putwrite.lsp	135")                                                                      (xqp::|put.AiM.value.Xn| |both|                                                                              *)                                                             (* \; "both	putwrite.lsp	135")                                                                      (xqp::|put.AiM.value.XnM|                                                                       |both| *)                                                             (* \; "both	putwrite.lsp	135")                                                                      (xqp::|put.Ai.value.Yn| |both|                                                                              xqp::\a2 \y1)                                                             (* \; "both	putwrite.lsp	 81")                                                                      (xqp::|put.AiM.value.Yn| |both|                                                                              *)                                                             (* \; "both	putwrite.lsp	 81")                                                                      (xqp::|put.Ai.variable.Yn|                                                                       |both| xqp::\a2 \y1)                                                             (* \; "both	putwrite.lsp	 45")                                                                      (xqp::|put.AiM.variable.Yn|                                                                       |both| *)                                                             (* \; "both	putwrite.lsp	 45")                                                                      (xqp::|put.Ai.void| |both|                                                                              xqp::\a1)                                                             (* \; "both	putwrite.lsp	 10")                                                                      (xqp::|put.AiM.void| |both| *)                                                             (* \; "both	putwrite.lsp	 10")                                                                      (xqp::|raw.float| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp	 59")                                                                      (xqp::|interpret.me| |double|)                                                             (* \; "both	skel.lsp")                                                                      (xqp::|retry.me.else| |double|                                                                              xqp::|clause|)                                                             (* \; "read	index.lsp	 71")                                                                      (|right.shift| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|send.variable.Ai|                                                                              |double| xqp::\a1)                                                             (* \; "read	lisp.lsp	135")                                                                      (xqp::|send.variable.AiM|                                                                       |double| *)                                                             (* \; "read	lisp.lsp	135")                                                                      (xqp::|start.calling| |double|                                                                              xqp::|functor|)                                                             (* \; "read	lisp.lsp	127")                                                                      (xqp::|store.float| |both|                                                                              xqp::|extend| |cell|)                                                             (* \; "both	arith.lsp	231")                                                                      (xqp::|store.integer| |both|                                                                              xqp::|extend| |cell|)                                                             (* \; "both	arith.lsp	222")                                                                      (xqp::|store.value.Yn| |single|                                                                              \y1)                                                             (* \; "single	arith.lsp	205")                                                                      (xqp::|store.value.Xn| |single|                                                                              xqp::\a1)                                                             (* \; "single	arith.lsp	199")                                                                      (xqp::|store.value.XnM|                                                                              |single| *)                                                             (* \; "single	arith.lsp	199")                                                                      (xqp::|store.variable.Xn|                                                                       |single| xqp::\a1)                                                             (* \; "single	arith.lsp	174")                                                                      (xqp::|store.variable.XnM|                                                                       |single| *)                                                             (* \; "single	arith.lsp	174")                                                                      (xqp::|store.variable.Yn|                                                                       |single| \y1)                                                             (* \; "single	arith.lsp	183")                                                                      (xqp::|add.neg.word| |single|                                                                              |atom|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|add.pos.word| |single|                                                                              |atom|)                                                             (* \; "single	arith.lsp")                                                                      (xqp::|maybe.trail.Yn| |both|                                                                              \y1)                                                             (* \; "both	BIND.LSP")                                                                      (xqp::|check.heap| |both|)                                                             (* \; "both	BIND.LSP")                                                                      (xqp::|subtract| |both|                                                                              xqp::|extend|)                                                             (* \; "both	arith.lsp")                                                                      (xqp::|trust.me.else| |double|                                                                              xqp::|clause|)                                                             (* \; "read	index.lsp	 81")                                                                      (xqp::|try.me.else| |double|                                                                              xqp::|clause|)                                                             (* \; "read	index.lsp	 30")                                                                      (xqp::|unify.boxed| |double|                                                                              |cell|)                                                             (* \;                                                "read	getread.lsp	468 double			write	putwrite.lsp	196")                                                                      (xqp::|unify.constant| |double|                                                                              |cell|)                                                             (* \;                                                "read	getread.lsp	421 double			write	putwrite.lsp	196")                                                                      (xqp::|unify.float| |double|                                                                              |cell|)                                                             (* \;                                                "read	getread.lsp	514 double			write	putwrite.lsp	196")                                                                      (xqp::|unify.list| |double|)                                                             (* \;                                                "read	getread.lsp	638 double			write	putwrite.lsp	263")                                                                      (xqp::|unify.local.Xn| |double|                                                                              xqp::\a1)                                                             (* \;                                                "read	getread.lsp	334 double			write	putwrite.lsp	153")                                                                      (xqp::|unify.local.XnM|                                                                              |double| *)                                                             (* \;                                                "read	getread.lsp	334 double			write	putwrite.lsp	153")                                                                      (xqp::|unify.local.Yn| |double|                                                                              \y1)                                                             (* \;                                                "read	getread.lsp	369 double			write	putwrite.lsp	126")                                                                      (xqp::|unify.nil| |double|)                                                             (* \;                                                "read	getread.lsp	594 double			write	putwrite.lsp	214")                                                                      (xqp::|unify.structure|                                                                              |double| xqp::|functor|)                                                             (* \;                                                "read	getread.lsp	681 double			write	putwrite.lsp	285")                                                                      (xqp::|unify.symbol| |double|                                                                              |atom|)                                                             (* \;                                                "read	getread.lsp	561 double			write	putwrite.lsp	237")                                                                      (xqp::|unify.value.Xn| |double|                                                                              xqp::\a1)                                                             (* \;                                                "read	getread.lsp	323 double			write	putwrite.lsp	145")                                                                      (xqp::|unify.value.XnM|                                                                              |double| *)                                                             (* \;                                                "read	getread.lsp	323 double			write	putwrite.lsp	145")                                                                      (xqp::|unify.value.Yn| |double|                                                                              \y1)                                                             (* \;                                                "read	getread.lsp	357 double			write	putwrite.lsp	 91")                                                                      (xqp::|unify.variable.Xn|                                                                       |double| xqp::\a1)                                                             (* \;                                                "read	getread.lsp	279 double			write	putwrite.lsp	 69")                                                                      (xqp::|unify.variable.XnM|                                                                       |double| *)                                                             (* \;                                                "read	getread.lsp	279 double			write	putwrite.lsp	 69")                                                                      (xqp::|unify.variable.Yn|                                                                       |double| \y1)                                                             (* \;                                                "read	getread.lsp	301 double			write	putwrite.lsp	 56")                                                                      (xqp::|unify.void| |double|                                                                              |byte|)                                                             (* \;                                                "read	getread.lsp	267 double			write	putwrite.lsp	 19")                                                                      (xqp::|send.direct.Ai| |double|                                                                              xqp::\a1)                                                             (* \; "read	lisp.lsp	135")                                                                      (xqp::|send.direct.AiM|                                                                              |double| *)                                                             (* \; "read	lisp.lsp	135")                                                                      (xqp::|trap| |both|                                                                              xqp::|procedure|)                                                             (* \; "read	skel.lsp")                                                                      (xqp::|just.index.else|                                                                              |double| xqp::|clause|)                                                             (* \; "read	index.lsp")                                                                      (xqp::|try.index.else| |double|                                                                              xqp::|clause|)                                                             (* \; "read	index.lsp")                                                                      (xqp::|retry.index.else|                                                                              |double| xqp::|clause|)                                                             (* \; "read	index.lsp")                                                                      (xqp::|trust.index.else|                                                                              |double| xqp::|clause|)                                                             (* \; "read	index.lsp")                                                                      (xqp::|ignore.me| |double|)                                                             (* \; "both	skel.lsp")                                                                      (xqp::|ignore.me.but.keep.me|                                                                       |double|)                                                             (* \; "both	skel.lsp")                                                                      (xqp::|retry.at| |double|)                                                             (* \; "both	skel.lsp")                                                                      (xqp::|fail.on.retry| |double|)                                                             (* \; "both	skel.lsp")                                                                      (xqp::|store.skeleton| |double|                                                                              xqp::|extend|)                                                             (* \; "both	skel.lsp")                                                                      (xqp::|load.choice.point|                                                                       |both|)                                                             (* \; "both	cut.lsp		 29")                                                                      (xqp::|cut.to.choice.point|                                                                       |both|)                                                             (* \; "both	cut.lsp	 	 43")                                                                      (xqp::|load.cur.clause| |both|)                                                             (* \; "both	skel.lsp")                                                                      (|apply| |both|)                                                             (* \; "both	call.lsp	 49")                                                                      (|arg| |both|)                                                             (* \; "both	meta.lsp	 53")                                                                      (xqp::|functor| |both|)                                                             (* \; "both	meta.lsp	247")                                                                      (xqp::|gettopval| |both| |atom|                                                                             )                                                             (* \; "both	donor.lsp")                                                                      (xqp::|settopval| |both| |atom|                                                                             )                                                             (* \; "both	donor.lsp")                                                                      (xqp::|get.word| |both|)                                                             (* \; "both	donor.lsp")                                                                      (xqp::|get.addr| |both|)                                                             (* \; "both	donor.lsp")                                                                      (xqp::|put.word| |both|                                                                              xqp::|extend|)                                                             (* \; "both	donor.lsp")                                                                      (xqp::|put.addr| |both|                                                                              xqp::|extend|)                                                             (* \; "both	donor.lsp")                                                                      (xqp::|dynamic.index| |double|)                                                             (* \; "both	index.lsp")                                                                      ))                                        (seta xqp::|QP.opcode| 254 'xqp::handle.overflow))(xqp::|init.instrs|)(* |;;| "The following function prints a table of instruction numbers so that parts of the Prolog system which need these numbers can be updated.")(xqp::|def.subr| xqp::|list.instrs| (flag) (setq flag (not (cl:fboundp 'xqp::|R.call|)))                                                             (* \; "has other code been loaded?")                                           (printout t "Normal Instructions" t t)                                           (|for| i |from| 0 |to| 255                                              |when| (and (neq (elt xqp::|QP.opcode| i)                                                               'shouldnt)                                                          (or flag (cl:fboundp (elt xqp::|QP.opcode|                                                                                     i))))                                              |do| (printout t xqp::|.I3| i " = " (elt                                                                                      xqp::|QP.opcode|                                                                                        i)                                                          " ("                                                          (times i 256)                                                          ")" t))                                           (printout t t "Extended Instructions" t t)                                           (|for| i |from| 256 |to| 383                                              |when| (and (neq (elt xqp::|QP.opcode| i)                                                               'shouldnt)                                                          (or flag (cl:fboundp (elt xqp::|QP.opcode|                                                                                     i))))                                              |do| (printout t xqp::|.I3| (difference i 256)                                                          " = "                                                          (elt xqp::|QP.opcode| i)                                                          " ("                                                          (plus i 256)                                                          ")" t))                                           (printout t t))(putprops instrs copyright ("Quintus Computer Systems, Inc" 1987))(declare\: dontcopy  (filemap (nil)))stop