(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "XCL" BASE 10)(FILECREATED "29-Jun-87 18:56:26" {ERIS}<PROLOGCORE>LYRIC>LISP>META.\;7 27716        |changes| |to:|  (INSTRUCTIONS XQP::|compare|)      |previous| |date:| "26-Jun-87 14:03:33" {ERIS}<PROLOGCORE>LYRIC>LISP>META.\;6); Copyright (c) 1987 by Quintus Computer Systems, Inc.  All rights reserved.(PRETTYCOMPRINT METACOMS)(RPAQQ METACOMS ((* |;;;| "This file was generated from {ERIS}<PROLOGCORE>LISPNEW>META.LSP;1, loaded 18-Jun-87 11:44:33")                 (FUNCTIONS XQP::|bind-either-for-functor| XQP::|super.tag.of| XQP::|unify-two-pairs|                        )                 (INSTRUCTIONS |arg| XQP::|compare| XQP::|functor| XQP::|is.a|)                 (PROPERTIES XQP::|list.funct|)                 (PROP MAKEFILE-ENVIRONMENT)))(* |;;;| "This file was generated from {ERIS}<PROLOGCORE>LISPNEW>META.LSP;1, loaded 18-Jun-87 11:44:33")(XQP::|def.macro| XQP::|bind-either-for-functor| (XQP::|Ptr| XQP::|Val|)   `(PROGN (\\PUTBASEPTR ,XQP::|Ptr| 0 (XQP::|ReadPrologPtr| ,XQP::|Val|))           (\\PUTBASEBYTE ,XQP::|Ptr| 0 (XQP::|ReadPrologTag| ,XQP::|Val|))           (|if| (XQP::\\BASELESSP ,XQP::|Ptr| (|if| (ILESSP (IPLUS (\\HILOC (XQP::|get.24| H))                                                                    1)                                                            (\\HILOC ,XQP::|Ptr|))                                                   |then| (XQP::|get.24| B)                                                 |else| (XQP::|get.24| XQP::HB)))               |then| (XQP::|decrement.cell.pointer| TR)                     (XQP::|put.addr| TR 0 ,XQP::|Ptr|))))(XQP::|def.macro| XQP::|super.tag.of| (X) (|if| (NOT (MEMB X XQP::QP.32))                                              |then| (SHOULDNT 'XQP::|super.tag.of|))                                          `(XQP::\\GET.HI.16 ,X))(XQP::|def.open| XQP::|unify-two-pairs| NIL                                        (PROG (P)                                              (|while| (EQ (XQP::|tag.of| A3)                                                           XQP::|ref.tag.8|)                                                     (SETQ P (XQP::|untag.ref| A3))                                                     (XQP::|put.32| A3 (XQP::|get-cell-for-apply|                                                                        P 0))                                                     (|if| (EQ (XQP::|untag.ref| A3)                                                               P)                                                         |then| (XQP::|bind-either-for-functor|                                                                 P A4)                                                               (GO L1)))                                              (|if| (NEQ (XQP::|untag.ref| A3)                                                         (XQP::|untag.ref| A4))                                                  |then| (RETURN (XQP::|fast.fail|)))                                          L1  (|while| (EQ (XQP::|tag.of| A2)                                                           XQP::|ref.tag.8|)                                                     (SETQ P (XQP::|untag.ref| A2))                                                     (XQP::|put.32| A2 (XQP::|get-cell-for-apply|                                                                        P 0))                                                     (|if| (EQ (XQP::|untag.ref| A2)                                                               P)                                                         |then| (XQP::|bind-either-for-functor|                                                                 P A1)                                                               (GO L2)))                                              (SETQ P (XQP::|untag.ref| A1))                                              (|if| (NOT (|if| (LITATOM P)                                                             |then| (EQ (XQP::|untag.ref| A2)                                                                        P)                                                           |else| (EQP (XQP::|untag.ref| A2)                                                                       P)))                                                  |then| (RETURN (XQP::|fast.fail|)))                                          L2  (RETURN (XQP::|continue| 0))))(XQP::|def.both.mode| |arg| NIL (PROG (I N P)                                      (|while| (EQ (XQP::|tag.of| A1)                                                   XQP::|ref.tag.8|)                                             (SETQ P (XQP::|untag.ref| A1))                                             (XQP::|WritePrologTagAndPtr| A1 (\\GETBASEBYTE P 0)                                                    (\\GETBASEPTR P 0))                                             (|if| (EQ (XQP::|untag.ref| A1)                                                       P)                                                 |then| (GO XQP::|arg.fail|)))                                      (|if| (NEQ (XQP::|super.tag.of| A1)                                                 (CONSTANT (IPLUS XQP::|immed.tag.16| (\\HILOC 0))))                                          |then| (GO XQP::|arg.fail|))                                      (|if| (EQ (SETQ I (XQP::\\GET.LO.16 A1))                                                0)                                          |then| (GO XQP::|arg.fail|))                                      (|while| (EQ (XQP::|tag.of| A2)                                                   XQP::|ref.tag.8|)                                             (SETQ P (XQP::|untag.ref| A2))                                             (XQP::|WritePrologTagAndPtr| A2 (\\GETBASEBYTE P 0)                                                    (\\GETBASEPTR P 0))                                             (|if| (EQ (XQP::|untag.ref| A2)                                                       P)                                                 |then| (GO XQP::|arg.fail|)))                                      (XQP::|select.4| A2 (XQP::|struct.tag.8|                                                           (SETQ P (XQP::|untag.struct| A2))                                                           (SETQ N (XQP::|arity.of.cell| P))                                                           (|if| (GREATERP I N)                                                               |then| (GO XQP::|arg.fail|))                                                           (XQP::|put.32| T1 (                                                                            XQP::|get-cell-for-apply|                                                                              P I)))                                             (XQP::|list.tag.8| (|if| (GREATERP I 2)                                                                    |then| (GO XQP::|arg.fail|))                                                    (SETQ P (XQP::|untag.list| A2))                                                    (|if| (EQ I 1)                                                        |then| (XQP::|put.32| T1 (                                                                            XQP::|get-cell-for-apply|                                                                                  P 0))                                                      |else| (XQP::|put.32| T1 (                                                                            XQP::|get-cell-for-apply|                                                                                P 1))))                                             (PROGN (GO XQP::|arg.fail|)))                                      (XQP::|put.32| XQP::T0 (XQP::|get.Aval| 3))                                      (RETURN (XQP::|unify.and.continue| 0))                                  XQP::|arg.fail|                                      (RETURN (XQP::|fast.fail|))))(XQP::|def.both.mode| XQP::|compare|   NIL (PROG NIL(* |;;;| "scratch S")             (XQP::|put.24| S (XQP::|get.24| H))             (XQP::|put.32| XQP::T0 (XQP::|get.Aval| 1))             (XQP::|put.32| T1 (XQP::|get.Aval| 2))             (XQP::|put.cell| H 0 (XQP::|get.32| XQP::T0))             (XQP::|put.cell| H 1 (XQP::|get.32| T1))             (XQP::|put.word| H 2 0)             (GO XQP::|compare.one|)         XQP::|compare.const|             (SELECTC (XQP::|tag.of| T1)                 (XQP::|ref.tag.8|                       (XQP::|put.24| C (XQP::|untag.ref| T1))                      (XQP::|put.32| T1 (XQP::|get.cell| C 0))                      (XQP::|reselect.when.bound| T1 C XQP::|compare.const|)                      (GO XQP::|compare.greater|))                 (XQP::|struct.tag.8|                       (GO XQP::|compare.less|))                 (XQP::|list.tag.8|                       (GO XQP::|compare.less|))                 (PROGN (GO XQP::|compare.consts|)))         XQP::|compare.consts|             (LET ((A (XQP::|untag.immed| XQP::T0))                   (B (XQP::|untag.immed| T1)))                  (|if| (EQ A B)                      |then| NIL                    |elseif| (LITATOM A)                      |then| (|if| (AND (LITATOM B)                                        (ALPHORDER A B))                                 |then| (GO XQP::|compare.less|)                               |else| (GO XQP::|compare.greater|))                    |elseif| (LITATOM B)                      |then| (GO XQP::|compare.less|)                    |elseif| (NOT (NUMBERP A))                      |then| (|if| (NUMBERP B)                                 |then| (GO XQP::|compare.greater|))                            (|if| (STRINGP A)                                |then| (|if| (STRINGP B)                                           |then| (LET ((C (ALPHORDER A B)))                                                       (|if| (NULL C)                                                           |then| (GO XQP::|compare.greater|))                                                       (|if| (EQ C 'LESSP)                                                           |then| (GO XQP::|compare.less|)))                                         |else| (GO XQP::|compare.greater|))                              |elseif| (STRINGP B)                                |then| (GO XQP::|compare.less|)                              |elseif| (XQP::\\BASELESSP A B)                                |then| (GO XQP::|compare.less|)                              |else| (GO XQP::|compare.greater|))                    |elseif| (NOT (NUMBERP B))                      |then| (GO XQP::|compare.less|)                    |elseif| (LESSP A B)                      |then| (GO XQP::|compare.less|)                    |elseif| (LESSP B A)                      |then| (GO XQP::|compare.greater|)                    |else| (|if| (FIXP A)                               |then| (|if| (FLOATP B)                                          |then| (GO XQP::|compare.less|))                             |else| (|if| (FIXP B)                                        |then| (GO XQP::|compare.greater|)))))         XQP::|compare.next|             (XQP::|put.16| I (XQP::|get.word| H 2))             (|if| (|zero| I)                 |then| (XQP::|put.nb| XQP::T0 0)                       (GO XQP::|compare.done|))             (XQP::|put.24| R (XQP::|get.addr| H 0))             (XQP::|put.24| C (XQP::|get.addr| H 1))             (XQP::|decrement.counter| I)             (|if| (|zero| I)                 |then| (XQP::|decrement.cell.pointer| H 3)               |else| (XQP::|put.addr| H 0 (XQP::|add.cell| R 1))                     (XQP::|put.addr| H 1 (XQP::|add.cell| C 1))                     (XQP::|put.word| H 2 (XQP::|get.16| I)))             (XQP::|put.32| XQP::T0 (XQP::|get.cell| R 0))             (XQP::|put.32| T1 (XQP::|get.cell| C 0))             (GO XQP::|compare.one|)         XQP::|compare.one|             (SELECTC (XQP::|tag.of| XQP::T0)                 (XQP::|ref.tag.8|                       (XQP::|put.24| R (XQP::|untag.ref| XQP::T0))                      (XQP::|put.32| XQP::T0 (XQP::|get.cell| R 0))                      (XQP::|reselect.when.bound| XQP::T0 R XQP::|compare.one|)                      (GO XQP::|compare.ref|))                 (XQP::|struct.tag.8|                       (GO XQP::|compare.struct|))                 (XQP::|list.tag.8|                       (GO XQP::|compare.list|))                 (PROGN (GO XQP::|compare.const|)))         XQP::|compare.struct|             (SELECTC (XQP::|tag.of| T1)                 (XQP::|ref.tag.8|                       (XQP::|put.24| C (XQP::|untag.ref| T1))                      (XQP::|put.32| T1 (XQP::|get.cell| C 0))                      (XQP::|reselect.when.bound| T1 C XQP::|compare.struct|)                      (GO XQP::|compare.greater|))                 (XQP::|struct.tag.8|                       (XQP::|put.24| R (XQP::|untag.struct| XQP::T0))                      (XQP::|put.24| C (XQP::|untag.struct| T1))                      (XQP::|put.32| XQP::T0 (XQP::|get.cell| R 0))                      (XQP::|put.32| T1 (XQP::|get.cell| C 0))                      (|if| (NOT (XQP::|same.cell| XQP::T0 T1))                          |then| (GO XQP::|compare.diff.structs|))                      (XQP::|put.16| I (SUB1 (XQP::|arity.of| XQP::T0)))                      (XQP::|put.32| XQP::T0 (XQP::|get.cell| R 1))                      (XQP::|put.32| T1 (XQP::|get.cell| C 1))                      (|if| (NOT (|zero| I))                          |then| (XQP::|increment.cell.pointer| H 3)                                (XQP::|put.addr| H 0 (XQP::|add.cell| R 2))                                (XQP::|put.addr| H 1 (XQP::|add.cell| C 2))                                (XQP::|put.word| H 2 (XQP::|get.16| I))                                (XQP::|check.heap| 23))                      (GO XQP::|compare.one|))                 (XQP::|list.tag.8|                       (XQP::|put.24| R (XQP::|untag.struct| XQP::T0))                      (XQP::|put.32| XQP::T0 (XQP::|get.cell| R 0))                      (XQP::|put.32| T1 (XQP::|list.funct|))                      (GO XQP::|compare.diff.structs|))                 (PROGN (GO XQP::|compare.greater|)))         XQP::|compare.diff.structs|             (|if| (ILESSP (XQP::|arity.of| XQP::T0)                          (XQP::|arity.of| T1))                 |then| (GO XQP::|compare.less|))             (|if| (ILESSP (XQP::|arity.of| T1)                          (XQP::|arity.of| XQP::T0))                 |then| (GO XQP::|compare.greater|))             (|if| (ALPHORDER (XQP::|atom.of| XQP::T0)                          (XQP::|atom.of| T1))                 |then| (GO XQP::|compare.less|)               |else| (GO XQP::|compare.greater|))         XQP::|compare.list|             (SELECTC (XQP::|tag.of| T1)                 (XQP::|ref.tag.8|                       (XQP::|put.24| C (XQP::|untag.ref| T1))                      (XQP::|put.32| T1 (XQP::|get.cell| C 0))                      (XQP::|reselect.when.bound| T1 C XQP::|compare.list|)                      (GO XQP::|compare.greater|))                 (XQP::|struct.tag.8|                       (XQP::|put.24| C (XQP::|untag.struct| T1))                      (XQP::|put.32| T1 (XQP::|get.cell| C 0))                      (XQP::|put.32| XQP::T0 (XQP::|list.funct|))                      (GO XQP::|compare.diff.structs|))                 (XQP::|list.tag.8|                       (XQP::|put.24| R (XQP::|untag.list| XQP::T0))                      (XQP::|put.24| C (XQP::|untag.list| T1))                      (XQP::|put.32| XQP::T0 (XQP::|get.cell| R 0))                      (XQP::|put.32| T1 (XQP::|get.cell| C 0))                      (XQP::|increment.cell.pointer| H 3)                      (XQP::|put.addr| H 0 (XQP::|add.cell| R 1))                      (XQP::|put.addr| H 1 (XQP::|add.cell| C 1))                      (XQP::|put.word| H 2 1)                      (XQP::|check.heap| 23)                      (GO XQP::|compare.one|))                 (PROGN (GO XQP::|compare.greater|)))         XQP::|compare.ref|             (SELECTC (XQP::|tag.of| T1)                 (XQP::|ref.tag.8|                       (XQP::|put.24| C (XQP::|untag.ref| T1))                      (XQP::|put.32| T1 (XQP::|get.cell| C 0))                      (XQP::|reselect.when.bound| T1 C XQP::|compare.ref|)                      (|if| (|before| R C)                          |then| (GO XQP::|compare.less|))                      (|if| (|before| C R)                          |then| (GO XQP::|compare.greater|))                      (GO XQP::|compare.next|))                 (PROGN (GO XQP::|compare.less|)))         XQP::|compare.less|             (XQP::|put.nb| XQP::T0 -1)             (GO XQP::|compare.done|)         XQP::|compare.greater|             (XQP::|put.nb| XQP::T0 1)             (GO XQP::|compare.done|)         XQP::|compare.done|             (XQP::|put.24| H (XQP::|get.24| S))             (RETURN (XQP::|continue| 0))))(XQP::|def.both.mode| XQP::|functor|   NIL   (PROG (P Q I)         (RETURN (XQP::|select.4|                  A1                  (XQP::|ref.tag.8|                   (SETQ P (XQP::|untag.ref| A1))                   (XQP::|put.32| A1 (XQP::|get-cell-for-apply| P 0))                   (|if| (NEQ (XQP::|untag.ref| A1)                              P)                       |then| (XQP::|reselect|))                   (XQP::|select.16| A2 (XQP::|ref.tag.8| (SETQ Q (XQP::|untag.ref| A2))                                               (XQP::|put.32| A2 (XQP::|get-cell-for-apply| Q 0))                                               (|if| (NEQ (XQP::|untag.ref| A2)                                                          Q)                                                   |then| (XQP::|reselect|))                                               (XQP::|fast.fail|))                          (XQP::|struct.tag.8| (XQP::|fast.fail|))                          (XQP::|list.tag.8| (XQP::|fast.fail|))                          (XQP::|symbol.tag.8| (XQP::|select.4|                                                A3                                                (XQP::|ref.tag.8| (SETQ Q (XQP::|untag.ref| A3))                                                       (XQP::|put.32| A3 (XQP::|get-cell-for-apply|                                                                          Q 0))                                                       (|if| (NEQ (XQP::|untag.ref| A3)                                                                  Q)                                                           |then| (XQP::|reselect|))                                                       (XQP::|fast.fail|))                                                (|if| (NEQ (XQP::|super.tag.of| A3)                                                           (CONSTANT (IPLUS XQP::|immed.tag.16|                                                                            (\\HILOC 0))))                                                    |then| (XQP::|fast.fail|)                                                  |elseif| (EQ (SETQ I (XQP::\\GET.LO.16 A3))                                                               0)                                                    |then| (XQP::|bind-either-for-functor| P A2)                                                          (XQP::|continue| 0)                                                  |elseif| (AND (EQ I 2)                                                                (EQ (XQP::|untag.ref| A2)                                                                    '\.))                                                    |then| (XQP::|put.32| XQP::T0 (XQP::|tag.list|                                                                                   H))                                                          (XQP::|bind-either-for-functor| P XQP::T0)                                                          (XQP::|put.cell| H 0 (XQP::|tag.ref| H))                                                          (XQP::|increment.cell.pointer| H)                                                          (XQP::|put.cell| H 0 (XQP::|tag.ref| H))                                                          (XQP::|increment.cell.pointer| H)                                                          (XQP::|check.heap| 21)                                                          (XQP::|continue| 0)                                                  |elseif| (IGREATERP I 255)                                                    |then| (XQP::|fast.fail|)                                                  |else| (XQP::|put.32| XQP::T0 (XQP::|tag.struct|                                                                                 H))                                                        (XQP::|bind-either-for-functor| P XQP::T0)                                                        (XQP::\\PUT.HI.16 A2 (LOGOR I                                                                                  XQP::|symbol.tag.16|                                                                                    ))                                                        (XQP::|put.cell| H 0 (XQP::|get.32| A2))                                                        (XQP::|increment.cell.pointer| H)                                                        (|until| (EQ I 0)                                                               (XQP::|put.cell| H 0 (XQP::|tag.ref|                                                                                     H))                                                               (XQP::|increment.cell.pointer| H)                                                               (SETQ I (IDIFFERENCE I 1)))                                                        (XQP::|check.heap| 21)                                                        (XQP::|continue| 0))))                          (PROGN (XQP::|bind-either-for-functor| P A2)                                 (|while| (EQ (XQP::|tag.of| A3)                                              XQP::|ref.tag.8|)                                        (SETQ Q (XQP::|untag.ref| A3))                                        (XQP::|put.32| A3 (XQP::|get-cell-for-apply| Q 0))                                        (|if| (EQ (XQP::|untag.ref| A3)                                                  Q)                                            |then| (XQP::|put.32| A3 (XQP::|tag.immed| 0))                                                  (XQP::|bind-either-for-functor| Q A3)                                                  (RETURN)))                                 (|if| (EQ (XQP::|untag.ref| A3)                                           0)                                     |then| (XQP::|continue| 0)                                   |else| (XQP::|fast.fail|)))))                  (XQP::|struct.tag.8| (SETQ Q (XQP::|untag.struct| A1))                         (XQP::|WritePrologTagAndPtr| A1 XQP::|symbol.tag.8| (XQP::|atom.of.cell|                                                                              Q))                         (XQP::|WritePrologTagAndPtr| A4 XQP::|immed.tag.8| (XQP::|arity.of.cell|                                                                             Q))                         (XQP::|unify-two-pairs|))                  (XQP::|list.tag.8| (XQP::|WritePrologTagAndPtr| A1 XQP::|symbol.tag.8| '\.)                         (XQP::|WritePrologTagAndPtr| A4 XQP::|immed.tag.8| 2)                         (XQP::|unify-two-pairs|))                  (PROGN (XQP::|WritePrologTagAndPtr| A4 XQP::|immed.tag.8| 0)                         (XQP::|unify-two-pairs|))))))(XQP::|def.both.mode| XQP::|is.a| (|byte|) (PROG (MASK)                                                 (XQP::|select.16| A1 (XQP::|ref.tag.8|                                                                       (XQP::|put.24| R (                                                                                     XQP::|untag.ref|                                                                                         A1))                                                                       (XQP::|put.32| A1                                                                              (XQP::|get.cell| R 0))                                                                       (XQP::|reselect.when.bound|                                                                        A1 R)                                                                       (SETQ MASK 1))                                                        (XQP::|struct.tag.8| (SETQ MASK 2))                                                        (XQP::|list.tag.8| (SETQ MASK 4))                                                        (XQP::|symbol.tag.8| (SETQ MASK 128))                                                        (XQP::|float.tag.8| (SETQ MASK 32))                                                        (XQP::|boxed.tag.8| (SETQ MASK 16))                                                        (XQP::|immed.tag.8| (SETQ MASK 8))                                                        (XQP::|other.tag.8| (SETQ MASK 64))                                                        (PROGN (SHOULDNT 'XQP::|is.a|)))                                                 (RETURN (|if| (EQ (LOGAND (XQP::|get.16| N)                                                                          MASK)                                                                   0)                                                             |then| (XQP::|fast.fail|)                                                           |else| (XQP::|continue| 0)))))(XQP::|def.props| XQP::|list.funct| XQP::|Tag| (LAMBDA NIL XQP::|symbol.tag.8|)                                          XQP::|Ptr|                                          (LAMBDA NIL                    (* |;;| "NB:  the following wasn't quoted before, but the new compiler didn't like the code it generated (it didn't know how to store such a strange beast).  This generates suboptimal code, since it has to do the \\VAG2 each time, but c'est la guerre! ")                                            '(\\VAG2 2 (\\LOLOC '\.)))                                          HI                                          (LAMBDA NIL                                            (IPLUS XQP::|symbol.tag.16| 2))                                          LO                                          (LAMBDA NIL                                            (\\LOLOC '\.)))(PUTPROPS META COPYRIGHT ("Quintus Computer Systems, Inc" 1987))(DECLARE\: DONTCOPY  (FILEMAP (NIL)))STOP