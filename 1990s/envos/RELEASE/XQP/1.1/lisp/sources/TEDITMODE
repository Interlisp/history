(DEFINE-FILE-INFO READTABLE "XCL" PACKAGE "INTERLISP")(filecreated "19-Nov-87 17:47:05" {dsk}<lispfiles>dcoms>teditmode.\;2 26524        |changes| |to:|  (vars teditmodecoms)                       (advice tedit.put)                       (fns xqp::teditmode.set.mode.after.get.or.put)      |previous| |date:| " 8-Sep-87 16:24:16" {dsk}<lispfiles>dcoms>teditmode.\;1); Copyright (c) 1986, 1987 by Quintus Computer Systems, Inc.  All rights reserved.(prettycomprint teditmodecoms)(rpaqq teditmodecoms ((records xqp::teditmoderec)                      (initvars (xqp::teditmode.defaultmode.var '|Text|)                             (xqp::teditmode.modelist (list (|create| xqp::teditmoderec mode _                                                                   '|Text| xqp::in-menu? _ t                                                                    xqp::extension-list _                                                                   '(xqp::|tedit| tedit) textprops _                                                                    nil xqp::windowprops _ nil                                                                    xqp::inittextprops _ nil)))                             xqp::teditmode.menu)                      (globalvars xqp::teditmode.defaultmode.var xqp::teditmode.menu                              xqp::teditmode.modelist)                      (fns xqp::teditmode.changedefaultmode xqp::teditmode.changemode                            xqp::teditmode.copy.menu xqp::teditmode.defaultmode                            xqp::teditmode.fix.tedit.props xqp::teditmode.mode xqp::teditmode.newmode                            xqp::teditmode.set.mode.after.get.or.put xqp::teditmode.set.mode.initially                           )                      (p (|if| (not (assoc "Mode" (|fetch| (menu items)                                                         |of| tedit.default.menu)))                               |then|                               (tedit.add.menuitem tedit.default.menu                                      '("Mode" (function xqp::teditmode.changemode)))))                      (advise tedit.get tedit.put \\tedit.window.setup)                      (p (* |;;;| "Don't want to use filepkg ADVISE com, since Prolog system code advises TEDIT, also.  The two sets of advice need to be separated.")                         (advise 'tedit 'before nil '(setq props (xqp::teditmode.fix.tedit.props                                                                  text props))))                      (prop makefile-environment)))(declare\: eval@compile(record xqp::teditmoderec (mode xqp::in-menu? xqp::extension-list textprops xqp::windowprops                                 xqp::inittextprops)))(rpaq? xqp::teditmode.defaultmode.var '|Text|)(rpaq? xqp::teditmode.modelist (list (|create| xqp::teditmoderec mode _ '|Text| xqp::in-menu? _ t                                             xqp::extension-list _ '(xqp::|tedit| tedit) textprops _                                             nil xqp::windowprops _ nil xqp::inittextprops _ nil)))(rpaq? xqp::teditmode.menu nil)(declare\: doeval@compile dontcopy(globalvars xqp::teditmode.defaultmode.var xqp::teditmode.menu xqp::teditmode.modelist))(defineq(XQP::TEDITMODE.CHANGEDEFAULTMODE  (LAMBDA NIL                                                (* XQP::|pds:| " 2-Feb-86 19:05")                    (* * XQP::|Pops| |up| \a |menu| |to| XQP::|allow| |the| |user| |to| XQP::|see|           |what| |the| |default| |TEdit| |mode| |is| XQP::|now,| |and| XQP::|optionally|           |to| |change| XQP::|it.|)                    (* * XQP::|Any| |changes| |to| |this| |function| |should| |probably| |also|           |be| XQP::|made| |to| XQP::TEDITMODE.CHANGEMODE)    (|if| (NULL XQP::TEDITMODE.MENU)        |then| (SETQ XQP::TEDITMODE.MENU (|create| MENU                                                ITEMS _ (|for| REC |in| XQP::TEDITMODE.MODELIST                                                           |when| (|fetch| (XQP::TEDITMODEREC                                                                                   XQP::IN-MENU?)                                                                     |of| REC)                                                           |collect| (|fetch| (XQP::TEDITMODEREC                                                                               MODE) |of| REC))                                                CENTERFLG _ T                                                TITLE _ "TEdit Mode")))    (LET ((XQP::CURRENTMODE (XQP::TEDITMODE.DEFAULTMODE)))         (|replace| (MENU SHADEDITEMS) |of| XQP::TEDITMODE.MENU            |with| (|for| XQP::ITM |in| (|fetch| (MENU ITEMS) |of| XQP::TEDITMODE.MENU) |as| I                      |from| 1 |when| (EQUAL XQP::ITM XQP::CURRENTMODE)                      |do| (RETURN (LIST (CONS I BLACKSHADE)))))         (|replace| (MENU IMAGE) |of| XQP::TEDITMODE.MENU |with| NIL)         (LET ((NEWMODE (MENU XQP::TEDITMODE.MENU)))              (|if| (AND NEWMODE (NEQ NEWMODE XQP::CURRENTMODE))                  |then| (XQP::TEDITMODE.DEFAULTMODE NEWMODE)                        (|if| (EQUAL NEWMODE (XQP::TEDITMODE.DEFAULTMODE))                            |then| (PROMPTPRINT (CONCAT "Default TEdit mode changed to '" NEWMODE "'"                                                       ))                          |else| (PROMPTPRINT "Couldn't change mode"))                |else| (PROMPTPRINT (CONCAT "Default TEdit mode is still '" XQP::CURRENTMODE "'")))))    ))(XQP::TEDITMODE.CHANGEMODE  (LAMBDA (TEXTSTREAM)                                       (* XQP::|pds:| " 2-Feb-86 18:57")                    (* * XQP::|Pops| |up| \a |menu| |to| XQP::|allow| |the| |user| |to| XQP::|see|           |what| |mode| |the| |TEdit| |window| |is| |in| XQP::|now,| |and|           XQP::|optionally| |to| |change| XQP::|it.|)                    (* * XQP::|Any| |changes| |to| |this| |function| |should| |probably| |also|           |be| XQP::|made| |to| XQP::TEDITMODE.CHANGEDEFAULTMODE)    (|if| (NULL XQP::TEDITMODE.MENU)        |then| (SETQ XQP::TEDITMODE.MENU (|create| MENU                                                ITEMS _ (|for| REC |in| XQP::TEDITMODE.MODELIST                                                           |when| (|fetch| (XQP::TEDITMODEREC                                                                                   XQP::IN-MENU?)                                                                     |of| REC)                                                           |collect| (|fetch| (XQP::TEDITMODEREC                                                                               MODE) |of| REC))                                                CENTERFLG _ T                                                TITLE _ "TEdit Mode")))    (LET ((XQP::CURRENTMODE (XQP::TEDITMODE.MODE TEXTSTREAM)))         (|replace| (MENU SHADEDITEMS) |of| XQP::TEDITMODE.MENU            |with| (|for| XQP::ITM |in| (|fetch| (MENU ITEMS) |of| XQP::TEDITMODE.MENU) |as| I                      |from| 1 |when| (EQUAL XQP::ITM XQP::CURRENTMODE)                      |do| (RETURN (LIST (CONS I BLACKSHADE)))))         (|replace| (MENU IMAGE) |of| XQP::TEDITMODE.MENU |with| NIL)         (LET ((NEWMODE (MENU XQP::TEDITMODE.MENU)))              (|if| (AND NEWMODE (NEQ NEWMODE XQP::CURRENTMODE))                  |then| (XQP::TEDITMODE.MODE TEXTSTREAM NEWMODE)                        (|if| (EQUAL NEWMODE (XQP::TEDITMODE.MODE TEXTSTREAM))                            |then| (TEDIT.PROMPTPRINT TEXTSTREAM (CONCAT "TEdit mode changed to '"                                                                         NEWMODE "'")                                          T)                          |else| (TEDIT.PROMPTPRINT TEXTSTREAM "Couldn't change mode" T))                |else| (TEDIT.PROMPTPRINT TEXTSTREAM (CONCAT "TEdit mode is still '" XQP::CURRENTMODE                                                             "'")                              T))))))(XQP::TEDITMODE.COPY.MENU  (LAMBDA (MENU)                                             (* XQP::|pds:| "30-Jan-86 16:00")    (|create| MENU           ITEMS _ (|fetch| (MENU ITEMS) |of| MENU)           CENTERFLG _ (|fetch| (MENU CENTERFLG) |of| MENU)           CHANGEOFFSETFLG _ (|fetch| (MENU CHANGEOFFSETFLG) |of| MENU)           MENUFONT _ (|fetch| (MENU MENUFONT) |of| MENU)           TITLE _ (|fetch| (MENU TITLE) |of| MENU)           MENUOFFSET _ (|fetch| (MENU MENUOFFSET) |of| MENU)           WHENSELECTEDFN _ (|fetch| (MENU WHENSELECTEDFN) |of| MENU)           MENUBORDERSIZE _ (|fetch| (MENU MENUBORDERSIZE) |of| MENU)           MENUOUTLINESIZE _ (|fetch| (MENU MENUOUTLINESIZE) |of| MENU)           WHENHELDFN _ (|fetch| (MENU WHENHELDFN) |of| MENU)           MENUPOSITION _ (|fetch| (MENU MENUPOSITION) |of| MENU)           WHENUNHELDFN _ (|fetch| (MENU WHENUNHELDFN) |of| MENU)           MENUUSERDATA _ (|fetch| (MENU MENUUSERDATA) |of| MENU)           MENUTITLEFONT _ (|fetch| (MENU MENUTITLEFONT) |of| MENU)           SUBITEMFN _ (|fetch| (MENU SUBITEMFN) |of| MENU)           MENUFEEDBACKFLG _ (|fetch| (MENU MENUFEEDBACKFLG) |of| MENU)           SHADEDITEMS _ (|fetch| (MENU SHADEDITEMS) |of| MENU))))(XQP::TEDITMODE.DEFAULTMODE  (LAMBDA (NEWMODE)                                          (* XQP::|pds:| " 2-Feb-86 18:14")                    (* * XQP::|Return| |the| XQP::|current| |default| |TEdit| XQP::|mode.|          I\f NEWMODE |is| XQP::|non-NIL,| |then| XQP::|make| |it| |be| |the| |new|           |default| |TEdit| XQP::|mode.|)    (PROG1 XQP::TEDITMODE.DEFAULTMODE.VAR           (|if| NEWMODE               |then| (|if| (SASSOC NEWMODE XQP::TEDITMODE.MODELIST)                          |then| (|if| (NOT (EQUAL NEWMODE XQP::TEDITMODE.DEFAULTMODE.VAR))                                     |then| (SETQ XQP::TEDITMODE.DEFAULTMODE.VAR NEWMODE)                                           (LET ((XQP::BGMENUITEM (ASSOC '|TEdit|                                                                          |BackgroundMenuCommands|)))                                                (|change| (CADDR XQP::BGMENUITEM)                                                       (CONCAT "Opens a TEdit window in '" NEWMODE                                                               "' mode."))                                                (SETQ |BackgroundMenu| NIL)))                        |else| (ERROR "Unknown mode" NEWMODE))))))(XQP::TEDITMODE.FIX.TEDIT.PROPS  (LAMBDA (TEXT PROPS)                                       (* \; "Edited 18-Jun-87 18:29 by pds")(* |;;;| "Called before TEDIT (TEDIT is advised) to fix up the PROPS supplied to TEDIT and make them appropriate for the mode.  Returns a new PROPS list.")    (LET* ((XQP::SPECIFIEDMODE (LISTGET PROPS 'XQP::TEDIT.MODE))           (FILENAME (AND (NOT XQP::SPECIFIEDMODE)                          TEXT                          (INFILEP TEXT))(* |;;;| "No need to get file name if user specified mode explicitly.")                  )           (XQP::MODEREC (OR (AND XQP::SPECIFIEDMODE (SASSOC XQP::SPECIFIEDMODE                                                             XQP::TEDITMODE.MODELIST))                             (AND FILENAME (|bind| (EXT _ (FILENAMEFIELD FILENAME 'EXTENSION))                                              |for| REC |in| XQP::TEDITMODE.MODELIST                                              |thereis| (MEMB EXT (|fetch| (XQP::TEDITMODEREC                                                                                   XQP::EXTENSION-LIST                                                                                  ) |of| REC))))                             (SASSOC (XQP::TEDITMODE.DEFAULTMODE)                                    XQP::TEDITMODE.MODELIST))))(* |;;;| "MODEREC should never be NIL.")          (APPEND (|if| (NOT (EQUAL XQP::SPECIFIEDMODE (|fetch| (XQP::TEDITMODEREC MODE) |of|                                                                                          XQP::MODEREC                                                              )))                      |then| (LIST 'XQP::TEDIT.MODE (|fetch| (XQP::TEDITMODEREC MODE) |of|                                                                                          XQP::MODEREC                                                           ))                    |else| NIL)                 PROPS                 (LET ((XQP::TEXTPROPS (APPEND (|fetch| (XQP::TEDITMODEREC XQP::INITTEXTPROPS)                                                  |of| XQP::MODEREC)                                              (|fetch| (XQP::TEDITMODEREC XQP::TEXTPROPS)                                                 |of| XQP::MODEREC))))                      (APPEND (LIST 'XQP::TEDITMODE.OLDPROPS (|for| PROP |in| XQP::TEXTPROPS                                                                |by| (CDDR PROP)                                                                |collect| (CONS PROP NIL)))                             XQP::TEXTPROPS))))))(XQP::TEDITMODE.MODE  (LAMBDA (XQP::TEXTOBJ-OR-STREAM-OR-WINDOW NEWMODE XQP::DONTBREAK?)                                                             (* XQP::|pds:| " 2-Feb-86 22:05")                    (* * XQP::|Returns| XQP::|current| |mode| |of| XQP::TEXTOBJ-OR-STREAM.          I\f NEWMODE |is| XQP::|non-NIL,| |then| |also| |changes|           XQP::TEXTOBJ-OR-STREAM-OR-WINDOW |to| XQP::NEWMODE.          XQP::|Modes| |are| XQP::|listed| |in| XQP::TEDITMODE.MODELIST\, |which| |is| \a           |list| |of| XQP::TEDITMODEREC\, |which| |are| |of| |the| |form|          (|mode| XQP::|in-menu?| XQP::|extension-list| XQP::|textprops|           XQP::|windowprops| XQP::|enterfn| XQP::|exitfn|)\.          XQP::|Mode| |is| |the| |name| |of| |the| XQP::|mode;|          |if| XQP::|in-menu?| |is| XQP::|non-NIL,| |then| |this| |mode| |will|           XQP::|automatically| |be| XQP::|included| |in| |the| |menu| |of| XQP::|modes|           XQP::|presented| |when| XQP::|you| XQP::|select| MODE |from| |the|           XQP::|modified| |default| |TEdit| XQP::|menu;|          XQP::|extension-list| |is| \a |list| |of| |file| XQP::|extensions| |that|           XQP::|automatically| XQP::|switch| \a |TEdit| |window| |to| |that| XQP::|mode.|          XQP::|Textprops| |is| \a |property| |list| |of| TEXTOBJ |properties| |and|           XQP::|their| XQP::|values.| |These| |properties| |will| |be| |set| |when| \a           |TEdit| |window| |is| XQP::|put| |into| |the| XQP::|mode,| |and| XQP::|unset|           |when| |taken| |out| |of| |that| XQP::|mode.|          XQP::|Similarly| |for| XQP::|windowprops.|          A |menu| XQP::|placed| |on| |the| |TEdit| XQP::|window's| TEDIT.MENU           XQP::|prop| |will| |be| |used| |instead| |of| |the| |default| |TEdit|           XQP::|menu.| XQP::|Enterfn,| |if| XQP::|non-NIL,| |and| |not| |the| |atom|           XQP::|DON'T,| |will| |be| XQP::|applied| |to| |the| TEXTOBJ |before| |it| |is|           |changed| |to| |this| XQP::|mode.| XQP::|Similarly| |for| XQP::|exitfn.|          I\f |either| |of| |them| |is,| |or| XQP::|returns,| |the| |atom| XQP::|DON'T,|           |then| |the| |mode| |will| |not| |be| XQP::|entered|          (XQP::|exited|)\.)    (PROG1     (TEXTPROP (TEXTOBJ XQP::TEXTOBJ-OR-STREAM-OR-WINDOW)            'XQP::TEDIT.MODE)     (|if| NEWMODE         |then|                    (* * XQP::N.B.\: XQP::I\n |the| LET XQP::|below,| I |use| SASSOC |to| |find|           |the| XQP::|appropriate| |mode| |record| |since| I XQP::|know| |that| |the|           |mode| |is| |the| |first| |entry| |in| |the| XQP::|record.|          I XQP::|know| |this| |is| XQP::|unclean,| |but| XQP::|I'm| XQP::|doing| |it|           XQP::|anyway.|)         (LET* ((XQP::MODEREC (SASSOC NEWMODE XQP::TEDITMODE.MODELIST))                (XQP::TXTOB (TEXTOBJ XQP::TEXTOBJ-OR-STREAM-OR-WINDOW))                (WIN (CAR (|fetch| (TEXTOBJ \\WINDOW) |of| XQP::TXTOB))))               (|if| XQP::MODEREC                   |then| (|with| XQP::TEDITMODEREC XQP::MODEREC                                 (|if| (AND (LET ((EXITFN (TEXTPROP XQP::TXTOB 'XQP::EXITMODEFN)))                                                 (OR (NULL EXITFN)                                                     (NEQ (APPLY* EXITFN XQP::TXTOB NEWMODE)                                                          'DON\'T)))                                            (LET ((XQP::ENTERFN (LISTGET XQP::TEXTPROPS '                                                                       XQP::ENTERMODEFN)))                                                 (OR (NULL XQP::ENTERFN)                                                     (NEQ (APPLY* XQP::ENTERFN XQP::TXTOB NEWMODE)                                                          'DON\'T))))                                     |then| (|for| PAIR |in| (TEXTPROP XQP::TXTOB '                                                                    XQP::TEDITMODE.OLDPROPS)                                               |do| (TEXTPROP XQP::TXTOB (CAR PAIR)                                                           (CDR PAIR)))                                           (|for| PAIR |in| (WINDOWPROP WIN 'XQP::TEDITMODE.OLDPROPS)                                              |do| (WINDOWPROP WIN (CAR PAIR)                                                          (CDR PAIR)))                                           (TEXTPROP XQP::TXTOB 'XQP::TEDITMODE.OLDPROPS                                                  (|for| PTR |on| XQP::TEXTPROPS                                                     |by| (CDDR PTR)                                                     |collect| (CONS (CAR PTR)                                                                     (PROG1 (TEXTPROP XQP::TXTOB                                                                                   (CAR PTR))                                                                            (TEXTPROP XQP::TXTOB                                                                                   (CAR PTR)                                                                                   (CADR PTR))))))                                           (WINDOWPROP WIN 'XQP::TEDITMODE.OLDPROPS                                                  (|for| PTR |on| XQP::WINDOWPROPS                                                     |by| (CDDR PTR)                                                     |collect| (CONS (CAR PTR)                                                                     (WINDOWPROP WIN (CAR PTR)                                                                            (CADR PTR)))))                                           (TEXTPROP XQP::TXTOB 'XQP::TEDIT.MODE NEWMODE)                                   |elseif| (NOT XQP::DONTBREAK?)                                     |then| (ERROR "Unknown TEdit mode" NEWMODE)))))))))(XQP::TEDITMODE.NEWMODE  (LAMBDA (XQP::TEDITMODERECORD)                             (* XQP::|pds:| " 2-Feb-86 23:18")    (LET     ((NEWMODE (|fetch| (XQP::TEDITMODEREC MODE) |of| XQP::TEDITMODERECORD)))     (|if| (NOT (SASSOC NEWMODE XQP::TEDITMODE.MODELIST))         |then|         (NCONC1 XQP::TEDITMODE.MODELIST XQP::TEDITMODERECORD)         (|if| (|fetch| (XQP::TEDITMODEREC XQP::IN-MENU?) |of| XQP::TEDITMODERECORD)             |then| (SETQ XQP::TEDITMODE.MENU NIL)                   (LET ((XQP::BGMENUITEM (ASSOC '|TEdit| |BackgroundMenuCommands|)))                        (|if| (NULL (CDDDR XQP::BGMENUITEM))                            |then|                           (* |Add| XQP::|submenu| |to| |TEdit|                                                              |item|)                                  (NCONC1 XQP::BGMENUITEM                                         (LIST 'SUBITEMS (LIST "<change default>"                                                               (KWOTE (LIST (FUNCTION                                                                      XQP::TEDITMODE.CHANGEDEFAULTMODE                                                                             )))                                                                                                                       "Allows you to choose the default TEdit mode"                                                               )                                               (LIST '|Text| (KWOTE (LIST (FUNCTION TEDIT)                                                                          NIL NIL NIL                                                                          (KWOTE (LIST '                                                                                      XQP::TEDIT.MODE                                                                                       '|Text|))))                                                     "Opens a TEdit window in 'Text' mode.")))                                  (|change| (CADDR XQP::BGMENUITEM)                                         "Opens a TEdit window in 'Text' mode."))                        (NCONC1 (CADDDR XQP::BGMENUITEM)                               (LIST NEWMODE (KWOTE (LIST (FUNCTION TEDIT)                                                          NIL NIL NIL (KWOTE (LIST 'XQP::TEDIT.MODE                                                                                    NEWMODE))))                                     (CONCAT "Opens a TEdit window in '" NEWMODE "' mode."))))                   (SETQ |BackgroundMenu| NIL))         NEWMODE       |else| NIL))))(xqp::teditmode.set.mode.after.get.or.put  (lambda (textobj file)                                     (* \; "Edited 19-Nov-87 17:44 by pds")    (let* ((xqp::newmoderec (|bind| (ext _ (filenamefield (or file (\\textstream.filename textobj))                                                  'extension)) |for| mode |in|                                                                               xqp::teditmode.modelist                               |thereis| (memb ext (|fetch| (xqp::teditmoderec xqp::extension-list)                                                      |of| mode))))           (newmode (and xqp::newmoderec (|fetch| (xqp::teditmoderec mode) |of| xqp::newmoderec))))          (|if| newmode              |then| (let ((oldmode (xqp::teditmode.mode textobj newmode)))                          (|if| (and newmode (not (equal newmode oldmode))                                     (equal newmode (xqp::teditmode.mode textobj)))                              |then| (tedit.promptprint textobj (concat "TEdit mode is '" newmode "'"                                                                       )                                            t)))))))(XQP::TEDITMODE.SET.MODE.INITIALLY  (LAMBDA (TEXTOBJ)                                          (* XQP::|pds:| " 5-Nov-86 17:20")    (LET ((WIN (CAR (|fetch| (TEXTOBJ \\WINDOW) |of| TEXTOBJ))))         (WINDOWPROP WIN 'XQP::TEDITMODE.OLDPROPS (|for| PTR                                                     |on| (|fetch| (XQP::TEDITMODEREC                                                                           XQP::WINDOWPROPS)                                                             |of| (SASSOC (TEXTPROP TEXTOBJ                                                                                 'XQP::TEDIT.MODE)                                                                         XQP::TEDITMODE.MODELIST))                                                     |by| (CDDR PTR)                                                     |collect| (CONS (CAR PTR)                                                                     (WINDOWPROP WIN (CAR PTR)                                                                            (CADR PTR))))))    (LET ((MODE (XQP::TEDITMODE.MODE TEXTOBJ)))         (|if| (AND MODE (NOT (TEXTPROP TEXTOBJ 'XQP::DONT.ANNOUNCE.MODE)))             |then| (TEDIT.PROMPTPRINT TEXTOBJ (CONCAT "TEdit mode is '" MODE "'")                           T)))    TEXTOBJ)))(|if| (not (assoc "Mode" (|fetch| (menu items)                                |of| tedit.default.menu)))      |then|      (tedit.add.menuitem tedit.default.menu '("Mode" (function xqp::teditmode.changemode))))(xcl:reinstall-advice 'tedit.get :after '((:last (xqp::teditmode.set.mode.after.get.or.put textobj                                                         file))))(xcl:reinstall-advice 'tedit.put :after '((:last (xqp::teditmode.set.mode.after.get.or.put stream                                                         file))))(xcl:reinstall-advice '\\tedit.window.setup :after '((:last (xqp::teditmode.set.mode.initially                                                                    textobj))))(readvise tedit.get tedit.put \\tedit.window.setup)(* |;;;| "Don't want to use filepkg ADVISE com, since Prolog system code advises TEDIT, also.  The two sets of advice need to be separated.")(advise 'tedit 'before nil '(setq props (xqp::teditmode.fix.tedit.props text props)))(putprops teditmode copyright ("Quintus Computer Systems, Inc" 1986 1987))(declare\: dontcopy  (filemap (nil (3312 25423 (xqp::teditmode.changedefaultmode 3322 . 5810) (xqp::teditmode.changemode 5812 . 8502) (xqp::teditmode.copy.menu 8504 . 9890) (xqp::teditmode.defaultmode 9892 . 11193) (xqp::teditmode.fix.tedit.props 11195 . 13908) (xqp::teditmode.mode 13910 . 20076) (xqp::teditmode.newmode 20078 . 22802) (xqp::teditmode.set.mode.after.get.or.put 22804 . 24051) (xqp::teditmode.set.mode.initially 24053 . 25421)))))stop