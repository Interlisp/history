#! /bin/sh# First line invokes Bourne shell# ============================================================================# ABSTRACT:#	Bourne script for checking/generating checksums files for the#	Notecards release. The script will generate a checksum-file for each#	release directory, containing the corresponding checksums for all#	files residing in the directory. The files having incorrect#	checksums will be reported with a message. The checksum-files will#	be put under:#	<ncdir>/checksumdir (Normally /usr/local/lde/checksumdir).#	## SYNOPSIS:#	ldechecksum [-cg]  ncdir  [ dir | dirgroup ]##	-c 	compare checksumfiles "FOO.check" with "FOO.sum" (default).#	-g 	generate checksumfiles "FOO.sum".#	ncdir is the name of the Notecards installation directory (normally#		is "/usr/local/lde").#	dir	can be any specific directory residing under ncdir. Only#		relative pathnames with respect to ncdir are accepted.#	dirgroup can be either "all" (default), "fonts" or "system" which#		means the "install.sunosX", "ncfiles", "patches", "sysouts"#		and "notecards" directories.## CHANGES:#	05-05-89 Carl Gadener : Added lispusers as an option#	03-30-89 Carl Gadener : Added fonts and fonts/press#	01-19-89 Carl Gadener : Parameter "ncdir" is now mandatory. Also#				check that "checksum" files were installed.#	12-22-88 Carl Gadener : Compressed the big "case $dirspec" statement#	12-15-88 Carl Gadener : Rewrote it for Bourne shell due to limitation#				factors in CSH#	12-12-88 Carl Gadener & Larry Harada : Creation of script# ============================================================================## First case statement checks arguments to ldechecksumcase $# in  0) echo "Usage: ldechecksum [ -cg ] ncdir [ dir | dirgroup ] "     exit 1 ;;  1) case $1 in       -*) echo "Usage: ldechecksum [ -cg ] ncdir [ dir | dirgroup ] "           exit 1 ;;       *)  arg="-c"           ncdir=$1           dirspec=all           break ;;     esac ;;  [23])      case $1 in       -[cg]) arg=$1           ncdir=$2           if test $# = 3           then              dirspec=$3           else             dirspec=all           fi           break  ;;       -*) echo "Usage: ldechecksum [ -cg ] ncdir [ dir | dirgroup ] "           exit 1 ;;       *)  arg="-c"           ncdir=$1           if test $# = 2           then              dirspec=$2           else              echo "Unexpected arg: $3"              exit 1           fi           break  ;;     esac ;;  *) echo "Usage: ldechecksum [ -cg ] ncdir [ dir | dirgroup ] "     exit 1 ;;esac#	Checking if the Notecards directory existsif test -d $ncdirthen    cd $ncdir#	Checking that script is correctly installed   if test -d checksumdir \        -a -f checksumdir/ldechecksum \        -a -f checksumdir/checksum   then      systemdirs="install.sunos3.mc68020 install.sunos4.mc68020 \		install.sunos4.sparc install.sunos4.1.sparc \		lisplibrary sysouts"      ncdirs="system library lispusers maps ncfiles patches tools"      fonts="JIS1 JIS2 chinese miscellaneous presentation printwheel \             publishing"      if test $arg = "-g"      then 	  operation="Generating"      else   #$arg = "-c"	  operation="Verifying"      fi      case $dirspec in        all)          checksumdir/ldechecksum $arg `pwd` system          checksumdir/ldechecksum $arg `pwd` notecards          checksumdir/ldechecksum $arg `pwd` fonts        ;;        system)	   echo "----------------------------------------------------"           echo "$operation checksums for Lisp directories"	   echo "----------------------------------------------------"           for file in $systemdirs           do              checksumdir/checksum $arg $file           done        ;;        notecards)	   echo "----------------------------------------------------"           echo "$operation checksums for notecards lcom directories"	   echo "----------------------------------------------------"           for file in $ncdirs           do              checksumdir/ldechecksum $arg `pwd` notecards/$file           done        ;;        fonts)          checksumdir/ldechecksum $arg `pwd` fonts/display          checksumdir/ldechecksum $arg `pwd` fonts/interpress          checksumdir/ldechecksum $arg `pwd` fonts/press          checksumdir/ldechecksum $arg `pwd` fonts/postscript        ;;        fonts/display | \	fonts/interpress)	   fonttype=`basename $dirspec`	   echo "----------------------------------------------------"           echo "$operation checksums for $fonttype font directories"	   echo "----------------------------------------------------"           for file in $fonts           do             checksumdir/checksum $arg $dirspec/$file       	   done        ;;#	All Notecards directories at the "lowest" level        install.sunos3.mc68020 | \        install.sunos4.mc68020 | \	install.sunos4.sparc | \	install.sunos4.1.sparc | \	lisplibrary | \	sysouts | \	notecards/system | \	notecards/library | \	notecards/lispusers | \	notecards/maps | \	notecards/ncfiles | \	notecards/tools | \	notecards/patches | \        fonts/display/JIS1 | \	fonts/display/JIS2 | \	fonts/display/chinese | \        fonts/display/miscellaneous | \	fonts/display/presentation | \	fonts/display/printwheel | \	fonts/display/publishing | \        fonts/interpress/JIS1 | \	fonts/interpress/JIS2 | \	fonts/interpress/chinese | \	fonts/interpress/miscellaneous | \	fonts/interpress/presentation | \	fonts/interpress/printwheel | \	fonts/interpress/publishing | \	fonts/press | \	fonts/postscript)           checksumdir/checksum $arg $dirspec	;;        *) echo "$dirspec : No such directory/grouping under `pwd`"            exit 1 ;;      esac   else      echo "`pwd`/checksumdir : No such directory or script incorrectly installed"13~     exit 1   fielse   echo "$ncdir : No such directory"   exit 1fi