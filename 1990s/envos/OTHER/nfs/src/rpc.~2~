(DEFINE-FILE-INFO READTABLE "XCL" PACKAGE (DEFPACKAGE "RPC2" (USE "LISP" "XCL")))(IL:FILECREATED "17-Jul-90 17:26:42" IL:{DSK}<LISPFILES>ETHERNET>TCP>NFS>RPC.\;2 6782         IL:|changes| IL:|to:|  (IL:FILES IL:RPCSTRUCT IL:RPCRPC IL:RPCXDR IL:RPCPORTMAPPER)      IL:|previous| IL:|date:| "27-Mar-89 14:51:07" IL:{DSK}<LISPFILES>ETHERNET>TCP>NFS>RPC.\;1); Copyright (c) 1987, 1988, 1989, 1990 by Stanford University and Xerox Corporation.  All rights reserved.(IL:PRETTYCOMPRINT IL:RPCCOMS)(IL:RPAQQ IL:RPCCOMS           ((IL:* IL:|;;;;| "SUN REMOTE PROCEDURE CALLS")           (IL:* IL:|;;;;| "Originally written by Jeff Finger at the SUMEX-AIM Computing Resource at Stanford University under support from National Institutes of Health Grant NIH 5P41 RR00785.")           (IL:* IL:|;;;;| "Modified to work under Medley 1.0-S by Atty Mullins & Doug Cutting.")           (IL:* IL:|;;;;| "Extensively revised by Bill van Melle")           (IL:PROPS (IL:RPC IL:MAKEFILE-ENVIRONMENT IL:FILETYPE))           (IL:P (EXPORT '(DEFINE-REMOTE-PROGRAM UNDEFINE-REMOTE-PROGRAM REMOTE-PROCEDURE-CALL                                  CALL-VIA-PORTMAPPER CREATE-UNIX-AUTHENTICATION SETUP-RPC PERFORM-RPC                                 OPEN-RPCSTREAM CLOSE-RPCSTREAM LIST-REMOTE-PROGRAMS FIND-RPC-PROGRAM                                 FIND-RPC-PROCEDURE FIND-RPC-HOST XDR-MAKE-OPAQUE CACHE-SOCKET                                  CLEAR-CACHE))                 (EXPORT '(XDR-CODEGEN XDR-CODEGEN-1 XDR-READ-BOOLEAN XDR-READ-INTEGER                                  XDR-READ-UNSIGNED XDR-READ-FLOAT XDR-READ-STRING XDR-WRITE-BOOLEAN                                  XDR-WRITE-INTEGER XDR-WRITE-UNSIGNED XDR-WRITE-FLOAT                                  XDR-WRITE-STRING XDR-GENCODE-INLINE))                 (EXPORT '(UDP TCP))                 (EXPORT '(*DEBUG* *COMPILE-XDR-CODE* *XDR-PRIMITIVE-TYPES* *XDR-CONSTRUCTED-TYPES*                                  *RPC-PROGRAMS* *MSEC-UNTIL-TIMEOUT* *MSEC-BETWEEN-TRIES*                                  *RPC-OK-TO-CACHE* *RPC-SOCKET-CACHE* *RPC-WELL-KNOWN-SOCKETS*                                  *RPC-PROTOCOL-TYPES* *USE-OS-NETWORKING*)))           (IL:VARIABLES *USE-OS-NETWORKING*)           (IL:FUNCTIONS RPC-AROUND-EXIT)           (EVAL-WHEN (LOAD)                  (IL:APPENDVARS (IL:AROUNDEXITFNS RPC-AROUND-EXIT))                                                             (IL:* IL:\;   "This is an APPENDVARS so that RPC-AROUND-EXIT runs FIRST at startup, before GREET in particular")                  (IL:FILES (IL:SYSLOAD)                         IL:RPCSTRUCT IL:RPCRPC IL:RPCXDR)                  (IL:P                                      (IL:* IL:\;                                                            "Load the appropriate transport.")                        (COND ((RPC-AROUND-EXIT)                                                             (IL:* IL:\; "On Maiko")                               (IL:FILESLOAD (IL:SYSLOAD)                                      IL:RPCOS))                              (T                             (IL:* IL:\;                       "Load only UDP.  If you want to use RPC over TCP, you must load TCP yourself")                                 (IL:FILESLOAD (IL:SYSLOAD)                                        IL:TCPLLIP IL:TCPUDP IL:RPCUDP))))                  (IL:FILES (IL:SYSLOAD)                         IL:RPCPORTMAPPER))))(IL:* IL:|;;;;| "SUN REMOTE PROCEDURE CALLS")(IL:* IL:|;;;;| "Originally written by Jeff Finger at the SUMEX-AIM Computing Resource at Stanford University under support from National Institutes of Health Grant NIH 5P41 RR00785.")(IL:* IL:|;;;;| "Modified to work under Medley 1.0-S by Atty Mullins & Doug Cutting.")(IL:* IL:|;;;;| "Extensively revised by Bill van Melle")(IL:PUTPROPS IL:RPC IL:MAKEFILE-ENVIRONMENT (:READTABLE "XCL" :PACKAGE (DEFPACKAGE "RPC2"                                                                                  (:USE "LISP" "XCL")                                                                                  )))(IL:PUTPROPS IL:RPC IL:FILETYPE :COMPILE-FILE)(EXPORT '(DEFINE-REMOTE-PROGRAM UNDEFINE-REMOTE-PROGRAM REMOTE-PROCEDURE-CALL CALL-VIA-PORTMAPPER                 CREATE-UNIX-AUTHENTICATION SETUP-RPC PERFORM-RPC OPEN-RPCSTREAM CLOSE-RPCSTREAM                 LIST-REMOTE-PROGRAMS FIND-RPC-PROGRAM FIND-RPC-PROCEDURE FIND-RPC-HOST                 XDR-MAKE-OPAQUE CACHE-SOCKET CLEAR-CACHE))(EXPORT '(XDR-CODEGEN XDR-CODEGEN-1 XDR-READ-BOOLEAN XDR-READ-INTEGER XDR-READ-UNSIGNED                 XDR-READ-FLOAT XDR-READ-STRING XDR-WRITE-BOOLEAN XDR-WRITE-INTEGER XDR-WRITE-UNSIGNED                XDR-WRITE-FLOAT XDR-WRITE-STRING XDR-GENCODE-INLINE))(EXPORT '(UDP TCP))(EXPORT '(*DEBUG* *COMPILE-XDR-CODE* *XDR-PRIMITIVE-TYPES* *XDR-CONSTRUCTED-TYPES* *RPC-PROGRAMS*                 *MSEC-UNTIL-TIMEOUT* *MSEC-BETWEEN-TRIES* *RPC-OK-TO-CACHE* *RPC-SOCKET-CACHE*                 *RPC-WELL-KNOWN-SOCKETS* *RPC-PROTOCOL-TYPES* *USE-OS-NETWORKING*))(DEFGLOBALPARAMETER *USE-OS-NETWORKING* NIL   "If false, RPC will use Interlisp-D TCP/IP, if true RPC will use the host operating system's IPC mechanism.")(DEFUN RPC-AROUND-EXIT (&OPTIONAL EVENT)   (IL:* IL:|;;| "Set flag so when we wake up on Maiko we know to use RPCOS.  User still has to have loaded it, though.")   (CASE EVENT       ((IL:AFTERLOGOUT IL:AFTERSYSOUT IL:AFTERSAVEVM IL:AFTERMAKESYS NIL)           (SETQ *USE-OS-NETWORKING* (EQ (IL:MACHINETYPE)                                        'IL:MAIKO)))       (T NIL)))(EVAL-WHEN (LOAD)(IL:APPENDTOVAR IL:AROUNDEXITFNS RPC-AROUND-EXIT)(IL:* IL:\; "This is an APPENDVARS so that RPC-AROUND-EXIT runs FIRST at startup, before GREET in particular")(IL:FILESLOAD (IL:SYSLOAD)       IL:RPCSTRUCT IL:RPCRPC IL:RPCXDR)                                                             (IL:* IL:\;                                                            "Load the appropriate transport.")(COND   ((RPC-AROUND-EXIT)                                        (IL:* IL:\; "On Maiko")    (IL:FILESLOAD (IL:SYSLOAD)           IL:RPCOS))   (T                                                        (IL:* IL:\;                       "Load only UDP.  If you want to use RPC over TCP, you must load TCP yourself")      (IL:FILESLOAD (IL:SYSLOAD)             IL:TCPLLIP IL:TCPUDP IL:RPCUDP)))(IL:FILESLOAD (IL:SYSLOAD)       IL:RPCPORTMAPPER))(IL:PUTPROPS IL:RPC IL:COPYRIGHT ("Stanford University and Xerox Corporation" 1987 1988 1989 1990))(IL:DECLARE\: IL:DONTCOPY  (IL:FILEMAP (NIL)))IL:STOP