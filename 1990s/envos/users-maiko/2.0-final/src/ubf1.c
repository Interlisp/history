/* This is G-file @(#) ubf1.c Version 1.10 (6/4/90). copyright Venue & Fuji Xerox  */static char *id = "@(#) ubf1.c	1.10 6/4/90";/*	ubf1.c *//************************************************************************//*									*//*	Copyright 1989, 1990 Venue, Fuji Xerox Co., Ltd, Xerox Corp.	*//*									*//*	This file is work-product resulting from the Xerox/Venue	*//*	Agreement dated 18-August-1989 for support of Medley.		*//*									*//************************************************************************/#include <stdio.h>#include "lispemul.h"#include "address68k.h"#include "lispglobal.h"#include "lisptypes.h"#include "lispmap.h"#include "arith.h"#include "fp.h"#include "my.h"/************************************************************	OP_ubfloat1  -- op 355  ==  UBFLOAT1355/0	BOX355/1	UNBOX355/2	ABS355/3	NEGATE355/4	UFIX***********************************************************/N_OP_ubfloat1(arg, alpha)int arg, alpha;{  switch (alpha) {    case 0: /* box */      {      register DLword *wordp;      DLword *createcell68k();      wordp = createcell68k(TYPE_FLOATP);      *((int *)wordp) = arg;      return(LADDR_from_68k(wordp));      }    case 1: /* unbox */      {      float dest;      int ret;      N_MakeFloat(arg, dest, arg);      ret = *(int *)&dest;      return(ret);      }    case 2: /* abs */      return(0x7FFFFFFF & arg);    case 3: /* neg */      return(0x80000000 ^ arg);    case 4: /* ufix */      {      register float temp;      int val;      temp = *(float *)&arg;      if ( (temp > ((float) 0x7fffffff)) ||           (temp < ((float) 0x80000000)) )               ERROR_EXIT(arg);#ifdef I386      I386Reset;#endif I386      val = (int)temp;#ifdef I386      I386Round;#endif      N_ARITH_SWITCH(val);      }    default: ERROR_EXIT(arg);  }/* end switch */}/* end N_OP_ubfloat1() */	/* end module */