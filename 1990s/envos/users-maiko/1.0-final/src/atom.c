/* This is G-file @(#) atom.c Version 2.2 (5/27/88). copyright Xerox & Fuji Xerox  */static char *id = "@(#) atom.c	2.2 5/27/88";/* *	Copyright (C) 1987 by Fuji Xerox Co., Ltd. All rights reserved. * *	Auther :  Takeshi Shimizu * *//**********************************************************************//* 		File Name :	atom.c		Desc	:	implement opcode ATOMCELL.N  					Date :		Apr 13, 1987 					Edited by :	Naoyuki Mitani 		Including :	OP_atomcellN								*//**********************************************************************/#include "lispemul.h"#include "lispmap.h"#include "emulglobal.h"/**********************************************************************//*		Func name :	OP_atomcellN				Set the LISP pointer to the property cell 				specified with the contents of TOS .					Date :		Apr 13, 1987					Edited by :	Naoyuki Mitani					Changed by:	Naoyuki Mitani(28-Apr)							take(15-may-87)				****NOTE see lispmap.h****	** ADOPTED NEW VERSION*//**********************************************************************/#ifdef C_ONLYOP_atomcellN(){#ifdef TRACE	printPC();	printf("TRACE: OP_atomcellN()\n");#endif/****	ufn(0301); ***/ if ((TopOfStack & 0xffff0000) != 0){	/* error("OP_aromcellN: Not Atom Pointer"); */	ufn(0301);	return; } switch((Get_BYTE(PC+1))) {	case D_DEFSHI :	TopOfStack = DEFS_OFFSET +((TopOfStack & 0x0ffff) << 1) ;			break;	case D_VALSHI :	TopOfStack = VALS_OFFSET + ((TopOfStack & 0x0ffff) << 1) ;			break ;	case D_PLISHI :	TopOfStack = PLIS_OFFSET + ((TopOfStack & 0x0ffff) << 1) ;			break;	case D_PNHI :	TopOfStack = PNP_OFFSET + ((TopOfStack & 0x0ffff) << 1) ;			break ;	default : 	/* error("OP_aromcellN: Not Atom Property"); */ 			ufn(0301);			return ;  }  PC += 2;}#elseN_OP_atomcellN(tos, n, error_addr)	register int tos;	int n, *error_addr;{#ifdef TRACE	printPC();	printf("TRACE: N_OP_atomcellN()\n");#endif if ((tos & 0xffff0000) != 0) ERROR_EXIT(error_addr);  tos = (tos << 1); switch(n) {	case D_DEFSHI :	return(DEFS_OFFSET + tos);	case D_VALSHI :	return(VALS_OFFSET + tos);	case D_PLISHI :	return(PLIS_OFFSET + tos);	case D_PNHI :	return(PNP_OFFSET + tos);	default : 	ERROR_EXIT(error_addr);  } }#endif