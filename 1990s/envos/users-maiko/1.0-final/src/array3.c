/* This is G-file @(#) array3.c Version 2.8 (7/6/88). copyright Xerox & Fuji Xerox  */static char *id = "@(#) array3.c	2.8 7/6/88";/*	array3.c */#include <stdio.h>#include "lispemul.h"#include "lispglobal.h"#include "address68k.h"#include "lispmap.h"#include "lisptypes.h"#include "emulglobal.h"#include "arith.h"#include "my.h"/***	N_OP_aref1   -- op 266   (array index)   ***/N_OP_aref1(arrayarg, inx, error_addr)int *error_addr;register LispPTR arrayarg, inx;{register LispPTR baseL;register int type, index;register DLword *arrayblk;LispPTR temp;register int result;	/*	for CREATECELL  */register DLword	*wordp;DLword	*createcell68k();  /*  verify array  */  if (GetTypeNumber(arrayarg) != TYPE_ONED_ARRAY) ERROR_EXIT(error_addr);  arrayblk = Addr68k_from_LADDR(arrayarg);  /*  test and setup index  */  N_GetPos(inx, index, error_addr);  if (index >= *((DLword *)(arrayblk + 5))) ERROR_EXIT(error_addr);  index += *((DLword *)(arrayblk + 3));  /*  setup typenumber  */  type = 0xFF & *((DLword *)(arrayblk + 2));  /*  setup base  */  baseL = *((LispPTR *)(arrayblk));  /*  disp on type  */  aref_switch(type, error_addr);} /*  end N_OP_aref1()  */