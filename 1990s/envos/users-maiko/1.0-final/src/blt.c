/* This is G-file @(#) blt.c Version 2.2 (5/27/88). copyright Xerox & Fuji Xerox  */static char *id = "@(#) blt.c	2.2 5/27/88";/* *	Copyright (C) 1987 by Fuji Xerox Co., Ltd. All rights reserved. * *	Auther :  Takeshi Shimizu * *//******************************************************************//*		File Name  :	blt.c		Including  :	OP_blt						Created    :	jul 9, 1987 by T.Shimizu*//******************************************************************/#include "lispemul.h"#include "address.h"#include "address68k.h"#include "lisptypes.h"#include "lispmap.h"#include "stack.h"#include "emulglobal.h"#include "lispglobal.h"#include "cell.h"#ifdef C_ONLY/*   OP_blt takes 3 arguments . STK-1 has destination's pointer. STK has source's pointer. TOS has number of words to be translated.*/OP_blt(){ register  DLword *source68k; register  DLword *dest68k ; register int nw;#ifdef TRACE	printPC();	printf("TRACE : OP_blt \n");#endif if((TopOfStack & 0xff0000) != S_POSITIVE)   error("OP_blt : Invlid arg . nwords"); nw = TopOfStack & 0xffff ; source68k =Addr68k_from_LADDR((*((LispPTR *)(CurrentStackPTR))) ); source68k += nw ; CurrentStackPTR -= 2 ; dest68k = Addr68k_from_LADDR((*((LispPTR *)(CurrentStackPTR))) ); CurrentStackPTR -= 2 ; dest68k += nw ; while(nw) {    *(--dest68k)= *(--source68k) ;   nw--;  }   PC++;} /* end OP_blt */#else/*   N_OP_blt takes 3 arguments . STK-1 has destination's pointer. STK has source's pointer. TOS has number of words to be translated.*/LispPTR N_OP_blt(destptr, sourceptr, wordcount, error_addr)	LispPTR destptr, sourceptr;	register LispPTR wordcount;	int *error_addr;{ register  DLword *source68k; register  DLword *dest68k ; register int nw;#ifdef TRACE	printPC();	printf("TRACE : N_OP_blt \n");#endif if((wordcount & 0xff0000) != S_POSITIVE) ERROR_EXIT(error_addr); nw = wordcount & 0xffff ; source68k = Addr68k_from_LADDR(sourceptr) + nw; dest68k = Addr68k_from_LADDR(destptr) + nw; while(nw)	{  *(--dest68k)= *(--source68k) ; nw--; } return(wordcount);} /* end N_OP_blt */  #endif