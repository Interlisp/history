h41202s 00016/00010/00069d D 1.26 93/03/25 12:15:58 sybalsky 26 25c es 00025/00025/00054d D 1.25 92/04/22 10:17:36 sybalsky 25 24c shortening file names for DOS \nes 00001/00001/00078d D 1.24 92/03/06 18:19:33 sybalsky 24 23c added -ldld to LDFLAGSes 00001/00001/00078d D 1.23 91/03/07 19:55:56 sybalsky 23 22c Add -DBIGATOMS for 3 byte atom emulator.es 00001/00001/00078d D 1.22 90/07/26 18:50:22 mitani 22 21c add -DNEW_STORAGE flages 00009/00000/00070d D 1.21 90/07/26 15:13:48 sybalsky 21 20c copyright changeses 00004/00002/00066d D 1.20 90/07/04 03:47:00 sybalsky 20 19c Bob Bane's changes:  Merging of makefile-tail and ...-x, use LDENAME for naming ldemulti &c.es 00006/00003/00062d D 1.19 90/05/09 18:49:57 fuji 19 18c Takeshi: Color emulator put into ldesingle.es 00009/00009/00056d D 1.18 90/04/20 02:13:15 sybalsky 18 17c AIX:  shortening file names, bulk change.es 00002/00002/00063d D 1.17 90/04/18 11:39:08 sybalsky 17 16c Posix:  shorten tosfuncallmacro to tosfuncalles 00001/00001/00064d D 1.16 90/03/01 14:34:49 osamu 16 15c Mitsunori Matsuda adds -DSUNDISPLAY in DFLAGS. c -DSUNDISPLAY means lde uses Frame buffer. c Maiko-X codes need codes in -DDISPLAYBUFFER. So he adds new compile option.es 00001/00001/00064d D 1.15 90/02/07 12:24:30 osamu 15 14c remove -DDISPLAYBUFFER from DFLAGS. if you want to use this option,you may use 'makeright multi'.es 00000/00000/00065d D 1.14 90/02/06 11:52:45 sybalsky 14 13c checkpes 00001/00001/00064d D 1.13 90/01/02 14:04:47 sybalsky 13 12c removed debug flages 00004/00003/00061d D 1.12 89/12/29 13:23:43 sybalsky 12 11c savoir changeses 00001/00001/00063d D 1.11 89/03/29 19:38:08 shih 11 10c removed FLTINT (doesn't work)es 00001/00001/00063d D 1.10 89/01/06 14:04:45 hayata 10 9c goofy rule fixed for xc.ies 00001/00001/00063d D 1.9 89/01/04 17:01:16 shimizu 9 8c Add OLD_CURSOR optiones 00002/00006/00062d D 1.8 88/12/06 20:30:23 shih 8 7c c files do not depend upon h files! brain-damaged rules here....es 00001/00001/00067d D 1.7 88/12/06 12:12:38 shimizu 7 6c Add -DOS4_TYPE4BUG to DFLAGSes 00000/00001/00068d D 1.6 88/11/15 12:36:52 shih 6 5c removed rule for RELDIR (generic)es 00003/00000/00066d D 1.5 88/11/10 16:03:18 bane 5 4c Added OEXT to make Apollo happyes 00002/00002/00064d D 1.4 88/11/09 17:00:02 bane 4 3c Played with xc.o dependencieses 00002/00000/00064d D 1.3 88/11/08 13:17:48 bane 3 2c Added rm for xc.{i,s1,s2,s3} intermediate files in xc.o rulees 00001/00001/00063d D 1.2 88/10/18 20:07:16 shih 2 1c default should be OBJECTDIR not BINDIRes 00064/00000/00000d D 1.1 88/10/18 15:47:07 bane 1 0c date and time created 88/10/18 15:47:07 by baneeuUf e 0tTI 1# Options for SunOS4 and SPARCD 19E 19I 19D 20#  %Z% %M% Version %I% (%G%). E 20I 20#  @(#) makefile-sunos4.sparc Version 1.19 (5/9/90). I 26#************************************************************************/#*									*/#*	(C) Copyright 1989-92 Venue. All Rights Reserved.		*/#*	Manufactured in the United States of America.			*/#*									*/#*	The contents of this file are proprietary information 		*/#*	belonging to Venue, and are provided to you under license.	*/#*	They may not be further distributed or disclosed to third	*/#*	parties without the specific permission of Venue.		*/#*									*/#************************************************************************/E 26E 20#I 21D 26##***********************************************************************/##									*/##	Copyright 1989, 1990 Venue, Fuji Xerox Co., Ltd, Xerox Corp.	*/##									*/##	This file is work-product resulting from the Xerox/Venue	*/##	Agreement dated 18-August-1989 for support of Medley.		*/##									*/##***********************************************************************/#E 26E 21E 19I 5# This is to make the %$#@! Apollo cc happyOEXT = .oD 12E 5OPTFLAGS = -O2E 12I 12# OPTFLAGS is normally -O2.D 19OPTFLAGS = -gE 19I 19OPTFLAGS = -O2E 19E 12FPFLAGS =D 7DFLAGS = -DKBINT -DFSERROR -DOS4 -DFLTINT -DSPARCDISP -DSUN4_OS4_ILE 7I 7D 9DFLAGS = -DKBINT -DFSERROR -DOS4 -DFLTINT -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUGE 9I 9D 11DFLAGS = -DKBINT -DFSERROR -DOS4 -DFLTINT -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DOLD_CURSORE 11I 11D 12DFLAGS = -DKBINT -DFSERROR -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DOLD_CURSORE 12I 12D 13DFLAGS = -DKBINT -DFSERROR -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DOLD_CURSOR -DDISPLAYBUFFER -DNEWBITBLT -DLOGINT -DDEBUGE 13I 13D 15DFLAGS = -DKBINT -DFSERROR -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DOLD_CURSOR -DDISPLAYBUFFER -DNEWBITBLT -DLOGINTE 15I 15D 16DFLAGS = -DKBINT -DFSERROR -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DOLD_CURSOR -DNEWBITBLT -DLOGINTE 16I 16D 19DFLAGS = -DKBINT -DFSERROR -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DOLD_CURSOR -DNEWBITBLT -DLOGINT -DSUNDISPLAYE 19I 19# Now share the same ldesingle with COLOR(CG4)/MONO Suns# If you load MAIKOCOLOR.LCOM etc., you can use color functionsD 20DFLAGS = -DKBINT -DFSERROR -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DCOLOR -DNEWBITBLT -DLOGINT -DSUNDISPLAYE 20I 20D 22DFLAGS = -DKBINT -DFSERROR -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DCOLOR -DNEWBITBLT -DLOGINT -DSUNDISPLAY -DFORKCOMME 22I 22D 23DFLAGS = -DKBINT -DFSERROR -DNEW_STORAGE -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DCOLOR -DNEWBITBLT -DLOGINT -DSUNDISPLAY -DFORKCOMME 23I 23D 26DFLAGS = -DKBINT -DFSERROR -DNEW_STORAGE -DOS4 -DSPARCDISP -DSUN4_OS4_IL -DOS4_TYPE4BUG -DCOLOR -DNEWBITBLT -DLOGINT -DSUNDISPLAY -DFORKCOMM -DBIGATOMSE 26I 26DFLAGS = -DKBINT -DFSERROR -DNEW_STORAGE -DOS4 -DSPARCDISP -DSUN4_OS4_IL  \	 -DOS4_TYPE4BUG -DCOLOR -DNEWBITBLT -DLOGINT -DSUNDISPLAY  \	 -DFORKCOMM -DBIGATOMS -DBIGVM -DNEWCDRCODINGE 26E 23E 22D 24LDFLAGS = -lsuntool -lsunwindow -lpixrect -lc -lmE 24I 24LDFLAGS = -lsuntool -lsunwindow -lpixrect -ldld -lc -lmE 24E 20E 19E 16E 15E 13E 12E 11E 9E 7#-Dsparc?D 25INLINE = $(SRCDIR)dispSPARC.ilI 12BITBLTFILE = $(OBJECTDIR)bitbltSPARC.oE 25I 25INLINE = $(SRCDIR)dspSPARC.ilBITBLTFILE = $(OBJECTDIR)bbtSPARC.oE 25E 12OBJECTDIR = ../$(RELEASENAME)/I 20D 25COLORFILES = $(OBJECTDIR)colorbltfns.oE 25I 25COLORFILES = $(OBJECTDIR)rawcolor.oE 25E 20D 6RELDIR = ../RELEASE/$(RELEASENAME)/E 6D 2default	: $(BINDIR)lde $(BINDIR)ldeetherE 2I 2default	: $(OBJECTDIR)lde $(OBJECTDIR)ldeetherE 2# Special rules to create xc.c on Sun4D 8$(SRCDIR)xc.c:	$(INCDIR)lispemul.h  $(INCDIR)emulglobal.h  $(INCDIR)address.h \E 8I 8#run cpp to expand macrosD 10$(OBJECTDIRDIR)xc.i:	$(SRCDIR)xc.c $(INCDIR)lispemul.h  $(INCDIR)emulglobal.h  $(INCDIR)address.h \E 10I 10D 25$(OBJECTDIR)xc.i:	$(SRCDIR)xc.c $(INCDIR)lispemul.h  $(INCDIR)emulglobal.h  $(INCDIR)address.h \E 10E 8	 $(INCDIR)address68k.h  $(INCDIR)stack.h  $(INCDIR)lispglobal.h \	 $(INCDIR)lisptypes.h  $(INCDIR)lispmap.h  $(INCDIR)cell.h \	 $(INCDIR)initatoms.h  $(INCDIR)gc.h  \E 25I 25$(OBJECTDIR)xc.i:	$(SRCDIR)xc.c $(INCDIR)lispemul.h  $(INCDIR)emlglob.h  $(INCDIR)address.h \	 $(INCDIR)adr68k.h  $(INCDIR)stack.h  $(INCDIR)lspglob.h \	 $(INCDIR)lsptypes.h  $(INCDIR)lispmap.h  $(INCDIR)cell.h \	 $(INCDIR)initatms.h  $(INCDIR)gc.h  \E 25	 $(INCDIR)arith.h $(INCDIR)stream.h \D 25	 $(INCDIR)tos1defs.h  $(INCDIR)tosretmacro.h \D 17	 $(INCDIR)tosfuncallmacro.h  $(INCDIR)inlinedefsC.h   \	 $(INCDIR)n_op_inlinedefsC.h  $(INCDIR)inlinedefs68K.hE 17I 17D 18	 $(INCDIR)tosfuncall.h  $(INCDIR)inlinedefsC.h   \	 $(INCDIR)inlinedefs68K.hE 18I 18	 $(INCDIR)tosfuncall.h  $(INCDIR)inlineC.h   \	 $(INCDIR)inline68K.hE 25I 25	 $(INCDIR)tos1defs.h  $(INCDIR)tosret.h \	 $(INCDIR)tosfns.h  $(INCDIR)inlineC.h   \	 $(INCDIR)inln68k.hE 25E 18E 17I 4D 8	rm -f $(OBJECTDIR)xc.s3 $(OBJECTDIR)xc.s2 $(OBJECTDIR)xc.s1 \	      $(OBJECTDIR)xc.iE 4#run cpp to expand macros$(OBJECTDIR)xc.i:	$(SRCDIR)xc.cE 8	cc -Qproduce .i $(DFLAGS) -I$(INCDIR) $(SRCDIR)xc.c -o $(OBJECTDIR)xc.i#run c compiler to produce first pass assembly$(OBJECTDIR)xc.s1:	$(OBJECTDIR)xc.i	rm -f $(OBJECTDIR)xc.s1	/lib/ccom - $(FPFLAGS) <$(OBJECTDIR)xc.i >$(OBJECTDIR)xc.s1#generate C program to remove dispatch loop, optimizeD 25$(OBJECTDIR)disphack.c: $(SRCDIR)disphack.lex	rm -f $(OBJECTDIR)disphack.c	lex -t $(SRCDIR)disphack.lex > $(OBJECTDIR)disphack.cE 25I 25$(OBJECTDIR)dsphack.c: $(SRCDIR)dsphack.lex	rm -f $(OBJECTDIR)dsphack.c	lex -t $(SRCDIR)dsphack.lex > $(OBJECTDIR)dsphack.cE 25#uses this program to find dispatchD 18$(OBJECTDIR)find-dispatch.c: $(SRCDIR)find-dispatch.lex	rm -f $(OBJECTDIR)find-dispatch.c	lex -t $(SRCDIR)find-dispatch.lex > $(OBJECTDIR)find-dispatch.cE 18I 18D 25$(OBJECTDIR)find-disp.c: $(SRCDIR)find-disp.lex	rm -f $(OBJECTDIR)find-disp.c	lex -t $(SRCDIR)find-disp.lex > $(OBJECTDIR)find-disp.cE 25I 25$(OBJECTDIR)find-dsp.c: $(SRCDIR)find-dsp.lex	rm -f $(OBJECTDIR)find-dsp.c	lex -t $(SRCDIR)find-dsp.lex > $(OBJECTDIR)find-dsp.cE 25E 18D 18$(OBJECTDIR)find-dispatch: $(OBJECTDIR)find-dispatch.c	cc -o $(OBJECTDIR)find-dispatch $(OBJECTDIR)find-dispatch.c -llE 18I 18D 25$(OBJECTDIR)find-disp: $(OBJECTDIR)find-disp.c	cc -o $(OBJECTDIR)find-disp $(OBJECTDIR)find-disp.c -llE 25I 25$(OBJECTDIR)find-dsp: $(OBJECTDIR)find-dsp.c	cc -o $(OBJECTDIR)find-dsp $(OBJECTDIR)find-dsp.c -llE 25E 18D 18$(OBJECTDIR)dispatch-label.c: $(OBJECTDIR)find-dispatch $(OBJECTDIR)xc.s1E 18I 18D 25$(OBJECTDIR)dispatch-label.c: $(OBJECTDIR)find-disp $(OBJECTDIR)xc.s1E 25I 25$(OBJECTDIR)dispatch-label.c: $(OBJECTDIR)find-dsp $(OBJECTDIR)xc.s1E 25E 18	rm -f $(OBJECTDIR)dispatch-label.cD 18	$(OBJECTDIR)find-dispatch < $(OBJECTDIR)xc.s1 >$(OBJECTDIR)dispatch-label.cE 18I 18D 25	$(OBJECTDIR)find-disp < $(OBJECTDIR)xc.s1 >$(OBJECTDIR)dispatch-label.cE 25I 25	$(OBJECTDIR)find-dsp < $(OBJECTDIR)xc.s1 >$(OBJECTDIR)dispatch-label.cE 25E 18D 25$(OBJECTDIR)disphack: $(OBJECTDIR)disphack.c $(OBJECTDIR)dispatch-label.c	cc -o $(OBJECTDIR)disphack $(OBJECTDIR)dispatch-label.c $(OBJECTDIR)disphack.c -ll	rm -f $(OBJECTDIR)dispatch-label.o $(OBJECTDIR)disphack.oE 25I 25$(OBJECTDIR)dsphack: $(OBJECTDIR)dsphack.c $(OBJECTDIR)dispatch-label.c	cc -o $(OBJECTDIR)dsphack $(OBJECTDIR)dispatch-label.c $(OBJECTDIR)dsphack.c -ll	rm -f $(OBJECTDIR)dispatch-label.o $(OBJECTDIR)dsphack.oE 25D 25$(OBJECTDIR)xc.s2:	$(OBJECTDIR)xc.s1 $(OBJECTDIR)disphackE 25I 25$(OBJECTDIR)xc.s2:	$(OBJECTDIR)xc.s1 $(OBJECTDIR)dsphackE 25	rm -f $(OBJECTDIR)xc.s2D 25	$(OBJECTDIR)disphack < $(OBJECTDIR)xc.s1 >$(OBJECTDIR)xc.s2E 25I 25	$(OBJECTDIR)dsphack < $(OBJECTDIR)xc.s1 >$(OBJECTDIR)xc.s2E 25$(OBJECTDIR)xc.s3:	$(OBJECTDIR)xc.s2 $(INLINE)	rm -f $(OBJECTDIR)xc.s3	/usr/lib/inline -i $(INLINE) < $(OBJECTDIR)xc.s2 > $(OBJECTDIR)xc.s3$(OBJECTDIR)xc.o: $(OBJECTDIR)xc.s3	/bin/as -o $(OBJECTDIR)xc.o -O1 $(OBJECTDIR)xc.s3I 3D 4	rm -f $(OBJECTDIR)xc.s3 $(OBJECTDIR)xc.s2 $(OBJECTDIR)xc.s1 \	      $(OBJECTDIR)xc.iE 4E 3E 1