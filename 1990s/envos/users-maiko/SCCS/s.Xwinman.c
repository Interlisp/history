h19185s 00004/00004/00221d D 1.3 92/04/27 18:45:01 nilsson 3 2c Fix of Xdisplay deps.es 00000/00004/00225d D 1.2 92/04/23 16:35:35 nilsson 2 1c New short name regimen. Improved X commandline handling.es 00229/00000/00000d D 1.1 92/04/21 15:28:09 sybalsky 1 0c date and time created 92/04/21 15:28:09 by sybalskyeuUf e 0tTI 1/* %Z% %M% Version %I% (%G%). copyright venue & Fuji Xerox  */static char *id = "%Z% %M%	%I% %G%	(venue & Fuji Xerox)";D 2/* %Z% %M% Version %I% (%G%). copyright venue & Fuji Xerox  */static char *id = "%Z% %M%	%I% %G%	(venue & Fuji Xerox)";E 2/************************************************************************//*									*//*	Copyright 1989, 1990 Venue, Fuji Xerox Co., Ltd, Xerox Corp.	*//*									*//*	This file is work-product resulting from the Xerox/Venue	*//*	Agreement dated 18-August-1989 for support of Medley.		*//*									*//************************************************************************//**** Copyright (C) 1988 by Fuji Xerox co.,Ltd. All rights reserved.**		Author: Mitsunori Matsuda*		Date  : August 22, 1988*/#include <stdio.h>#include <X11/Xlib.h>#include <X11/Xutil.h>#include "XVersion.h"#include "MyWindow.h"#include "dbprint.h"#define FALSE 0#define TRUE  !FALSED 3extern Display *Xdisplay;E 3extern XAnyEvent report;extern MyWindow *Head_of_Windows;/* int Next_Event_req;	removed JDS 7/6/90 keyboard speedup *//************************************************************************//*									*//*									*//*									*//*									*//*									*//************************************************************************/Add_WindowList( window )MyWindow *window;{	MyWindow *temp;	TPRINT(( "TRACE: Add_Window()\n" ));	if( !Head_of_Windows ) {		Head_of_Windows = window;	} else {		temp = Head_of_Windows;		while( temp->next ) {			temp = temp->next;		}		temp->next = window;	} /* end if */	window->next = NULL;} /* end Add_Window *//************************************************************************//*									*//*									*//*									*//*									*//*									*//************************************************************************/AddTop_WindowList( window )MyWindow *window;{	TPRINT(( "TRACE: AddTop_Window()\n" ));	window->next = Head_of_Windows;	Head_of_Windows = window;} /* end AddTop_Window *//************************************************************************//*									*//*									*//*									*//*									*//*									*//************************************************************************/Remove_WindowList( window )MyWindow *window;{	MyWindow *temp1	       , *temp2;	TPRINT(( "TRACE: Remove_Window()\n" ));	if( Head_of_Windows ) {		if( Head_of_Windows == window ) {			Head_of_Windows = window->next;			window->next = NULL;		} else {			temp2 = Head_of_Windows;			temp1 = Head_of_Windows->next;			while( temp1 ) {				if( temp1 == window ) {					temp2->next = temp1->next;					window->next = NULL;					break;				}				temp2 = temp1;				temp1 = temp1->next;			} /* end while */		} /* end if */	} /* end if */} /* end Remove_Window *//************************************************************************//*									*//*									*//*									*//*									*//*									*//************************************************************************/D 3getXsignaldata()E 3I 3getXsignaldata(display)     Display *display;E 3  {    MyWindow *window;    TPRINT(( "TRACE: getXsignaldata()\n" ));    /* Next_Event_req = TRUE; removed JDS 7/6/90 keybaord speedup */D 3    while(/* Next_Event_req &&*/ XPending( Xdisplay ) )E 3I 3    while(/* Next_Event_req &&*/ XPending( display ) )E 3      {	/* Next_Event_req = FALSE; removed JDS 7/6/90 keybaord speedup */D 3	XNextEvent( Xdisplay, &report );E 3I 3	XNextEvent( display, &report );E 3	window = Head_of_Windows;	while( window )	  {	    if( report.window == window->win )	      {		if( window->event_func )		    (window->event_func)(&report,window);		break; /* exit while */	      } /* end if */	    window = window->next;	  } /* end while */      } /* end if */  } /* end getXsignaldata() *//************************************************************************//*									*//*									*//*									*//*									*//*									*//************************************************************************/DispatchXhandler( event, window ) /* General event handler */  XAnyEvent *event;  MyWindow *window;  {    MyEvent *temp;    TPRINT(( "TRACE: DispatchXhandler()\n" ));    temp = window->event_head;    while( temp )      {	if( event->type == temp->type )	  {	    if( temp->func )	      {		(temp->func)( event, window );	      }	    /* break; */	    return;	  } /* end if */	temp = temp->next;      } /* end while */    DBPRINT(( "DispatchXhandler(): Unexpected event type %d\n",	      event->type ));  } /* end DispatchXhandler *//************************************************************************//*									*//*									*//*									*//*									*//*									*//************************************************************************/Bool isXeventtype( display, event, type )  Display *display;  XEvent *event;  {    TPRINT(( "TRACE: isXeventtype()\n" ));    if( event->type == type ) return( True );    else return( False );  } /* end isXeventtype */E 1