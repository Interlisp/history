h46401s 00054/00032/00083d D 1.4 91/01/25 17:53:06 sybalsky 4 3c Retrofit HP9000/RS6000 changeses 00003/00006/00112d D 1.3 90/09/18 23:28:51 sybalsky 3 2c Retrofit changes from AIX, DEC3100, PS/2es 00013/00002/00105d D 1.2 90/04/20 01:15:08 sybalsky 2 1c ile names, bulk change.es 00107/00000/00000d D 1.1 90/04/19 23:18:42 sybalsky 1 0c date and time created 90/04/19 23:18:42 by sybalskyeuUf e 0tTI 1/* %Z% %M% Version %I% (%G%). copyright venue & Fuji Xerox  */static char *id = "%Z% %M%	%I% %G%	(venue & Fuji Xerox)";D 2/* %Z% %M% Version %I% (%G%). copyright venue & Fuji Xerox  */static char *id = "%Z% %M%	%I% %G%	(venue & Fuji Xerox)";E 2I 2/************************************************************************//*									*//*	Copyright 1989, 1990 Venue, Fuji Xerox Co., Ltd, Xerox Corp.	*//*									*//*	This file is work-product resulting from the Xerox/Venue	*//*	Agreement dated 18-August-1989 for support of Medley.		*//*									*//************************************************************************/E 2/**** Copyright (C) 1988 by Fuji Xerox co.,Ltd. All rights reserved.**		Author: Mitsunori Matsuda*		Date  : August 11, 1988*/#include <stdio.h>#include <X11/Xlib.h>#include <X11/Xutil.h>#include "XVersion.h"#include "MyWindow.h"I 3#include "dbprint.h"E 3#define FALSE  0#define TRUE   !FALSEextern DisplayArea ScreenRegion;extern MyWindow Display_Window;extern int Bit_GravityI 4	 , Backing_StoreE 4	 , LispDisplayWidth	 , LispDisplayHeight;static int vertical   = VERTICAL         , horizontal = HORIZONTAL;I 4/************************************************************************//*									*//*									*//*	Reconfigure the screen-region, to account for window-size	*//*									*//*									*//************************************************************************/E 4Reconf_ScreenRegion(){D 4	int flag;E 4I 4    int flag;E 4D 3#ifdef TRACE	printf( "TRACE: Reconf_ScreenRegion()\" );#endifE 3I 3D 4	TPRINT(( "TRACE: Reconf_ScreenRegion()\n" ));E 4I 4    TPRINT(( "TRACE: Reconf_ScreenRegion()\n" ));E 4E 3D 4	switch( Bit_Gravity ) {E 4I 4    switch( Bit_Gravity )      {E 4	case NorthWestGravity:		ScreenRegion.right_x = ScreenRegion.left_x 					+ Display_Window.width - 1;		ScreenRegion.bottom_y = ScreenRegion.top_y					+ Display_Window.height - 1;		break;	case NorthEastGravity:		ScreenRegion.left_x = ScreenRegion.right_x 					- Display_Window.width + 1;		ScreenRegion.bottom_y = ScreenRegion.top_y					+ Display_Window.height - 1;		break;	case SouthWestGravity:		ScreenRegion.right_x = ScreenRegion.left_x 					+ Display_Window.width - 1;		ScreenRegion.top_y = ScreenRegion.bottom_y					- Display_Window.height + 1;		break;	case SouthEastGravity:		ScreenRegion.left_x = ScreenRegion.right_x 					- Display_Window.width + 1;		ScreenRegion.top_y = ScreenRegion.bottom_y					- Display_Window.height + 1;		break;	default:		fprintf( stderr			, "Reconf_ScreenRegion(): Undefined Gravity\n" );		break;D 4	} /* end switch */E 4I 4      } /* end switch */E 4D 4	/* Adjust Display Region */	flag = FALSE;E 4I 4    /* Adjust Display Region */    flag = FALSE;E 4D 4	if( ScreenRegion.left_x < 0 ) {		ScreenRegion.left_x = 0;		ScreenRegion.right_x = Display_Window.width - 1;		flag = TRUE;	}	if( ScreenRegion.top_y < 0 ) {		ScreenRegion.top_y = 0;		ScreenRegion.bottom_y = Display_Window.height - 1;		flag = TRUE;	}	if( ScreenRegion.right_x >= LispDisplayWidth ) {		ScreenRegion.right_x = LispDisplayWidth - 1;		ScreenRegion.left_x = ScreenRegion.right_x 					- Display_Window.width + 1;		flag = TRUE;	}	if( ScreenRegion.bottom_y >= LispDisplayHeight ) {		ScreenRegion.bottom_y = LispDisplayHeight - 1;		ScreenRegion.top_y = ScreenRegion.bottom_y 					- Display_Window.height + 1;		flag = TRUE;	}E 4I 4    if( ScreenRegion.left_x < 0 )      {	ScreenRegion.left_x = 0;	ScreenRegion.right_x = Display_Window.width - 1;	flag = TRUE;      }E 4D 3	if( flag ) {		refresh_Xscreen();	} /* end if(flag) */E 3I 3D 4	if( flag ) refresh_Xscreen();E 4I 4    if( ScreenRegion.top_y < 0 )      {	ScreenRegion.top_y = 0;	ScreenRegion.bottom_y = Display_Window.height - 1;	flag = TRUE;      }E 4E 3D 4	Move_ScrollBar( vertical );	Move_ScrollBar( horizontal );E 4I 4    if( ScreenRegion.right_x >= LispDisplayWidth )      {	ScreenRegion.right_x = LispDisplayWidth - 1;	ScreenRegion.left_x = ScreenRegion.right_x 				- Display_Window.width + 1;	flag = TRUE;      }E 4D 4} /* end Reconf_ScreenRegion */E 4I 4    if( ScreenRegion.bottom_y >= LispDisplayHeight )      {	ScreenRegion.bottom_y = LispDisplayHeight - 1;	ScreenRegion.top_y = ScreenRegion.bottom_y 				- Display_Window.height + 1;	flag = TRUE;      }    if (Backing_Store) flag = TRUE; /* always have to refresh, since */				    /* we get no "Expose" Events. */    if( flag ) refresh_Xscreen();    Move_ScrollBar( vertical );    Move_ScrollBar( horizontal );  } /* end Reconf_ScreenRegion */E 4E 1