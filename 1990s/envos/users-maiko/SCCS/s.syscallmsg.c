h54689s 00002/00002/00068d D 1.7 90/09/18 23:49:13 sybalsky 7 6c Retrofit changes from AIX, DEC3100, PS/2es 00021/00002/00049d D 1.6 90/09/12 16:13:29 sybalsky 6 5c Make external refs be declared extern, so don't shadow on RS6000.es 00025/00000/00026d D 1.5 90/07/04 04:03:53 sybalsky 5 4c Change perror to not reset errno (!) Savoir fixes 00000/00000/00026d D 1.4 90/04/20 01:54:16 sybalsky 4 3c tening file names, bulk change.es 00001/00001/00025d D 1.3 90/04/17 17:03:00 sybalsky 3 2c AIX port changes, perror -> 1 arges 00018/00007/00008d D 1.2 89/12/28 15:28:49 sybalsky 2 1c es 00015/00000/00000d D 1.1 88/12/23 13:30:33 shih 1 0c date and time created 88/12/23 13:30:33 by shiheuUtTI 1D 7/* %Z% %M% Version %I% (%G%). copyright envos & Fuji Xerox  */static char *id = "%Z% %M%	%I% %G%		(envos & Fuji Xerox)";E 7I 7/* %Z% %M% Version %I% (%G%). copyright venue & Fuji Xerox  */static char *id = "%Z% %M%	%I% %G%	(venue & Fuji Xerox)";E 7I 2/************************************************************************//*									*//*	Copyright 1989, 1990 Venue, Fuji Xerox Co., Ltd, Xerox Corp.	*//*									*//*	This file is work-product resulting from the Xerox/Venue	*//*	Agreement dated 18-August-1989 for support of Medley.		*//*									*//************************************************************************/E 2#include	<stdio.h>#include	"osmessage.h"I 5D 6int errno;E 6I 6/************************************************************************//*									*//*			p e r r o r n					*//*									*//*	Print the error message to go with a given error number.	*//*									*//************************************************************************/extern int errno;E 6int sys_nerr;D 6char *sys_errlist[];E 6I 6extern char *sys_errlist[];E 6perrorn(s, n)  char	*s;  int	n;{  if ( s != NULL && *s != '\0' ) {    fprintf(stderr, "%s: ",s);  }  if (n > 0 && n < sys_nerr) {    fprintf(stderr, "%s\n", sys_errlist[n]);  } else {    fprintf(stderr, "???\n");  }}I 6/************************************************************************//*									*//*				e r r _ m e s s				*//*									*//*	Print an error message and call 'perror' to get the		*//*	canonical error explanation.  Called by emulator I/O code.	*//*									*//************************************************************************/E 6E 5err_mess(from, no)D 2char	*from;int	no;{	OSMESSAGE_PRINT({fprintf(stderr,				"System call error: %s errno=%d ",				from, no); perror("", no);});E 2I 2  char	*from;  int	no;  {I 5    int	save_errno=errno;	/* Save errno around OSMESSAGE_PRINT */E 5    OSMESSAGE_PRINT({fprintf(stderr,			     "System call error: %s errno=%d ",D 3			     from, no); perror("", no);});E 3I 3			     from, no); perror("");});I 5    errno=save_errno;E 5E 3E 2D 2}E 2I 2  }E 2E 1