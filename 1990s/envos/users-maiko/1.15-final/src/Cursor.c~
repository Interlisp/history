/* @(#) Cursor.c Version 1.1 (3/1/90). copyright venue & Fuji Xerox  */static char *id = "@(#) Cursor.c	1.1 3/1/90	(venue & Fuji Xerox)";/**** Copyright (C) 1988 by Fuji Xerox co.,Ltd. All rights reserved.**		Author: Mitsunori Matsuda*		Date  : August 12, 1988**/#include <stdio.h>#include <X11/Xlib.h>#include <X11/Xutil.h>#include "lispemul.h"#include "display.h"#include "XVersion.h"#include "MyWindow.h"extern Display *Xdisplay;extern MyWindow Lisp_Window;extern XGCValues gcv;extern int Lisp_Xinitialized	 , Video_Inverted	 , Bitmap_Pad	 , Default_Depth;extern unsigned long Black_Pixel	           , White_Pixel;XImage CursorImage;Pixmap CursorPixmap_source     , CursorPixmap_mask;GC cursor_source_gc , cursor_mask_gc;XColor cursor_fore_xcsd     , cursor_back_xcsd     , xced;Colormap Colors;init_Xcursor(){#ifdef TRACE	printf( "TRACE: init_Xcursor()\n" );#endif	CursorImage.width   = CURSORWIDTH;	CursorImage.height  = CURSORHEIGHT;	CursorImage.xoffset = 0;	CursorImage.format  = XYBitmap;#ifdef XV11R1	CursorImage.byte_order  = LSBFirst;#else XV11R1	CursorImage.byte_order  = MSBFirst;#endif XV11R1	CursorImage.bitmap_unit = BITSPER_DLWORD;	CursorImage.bitmap_pad  = Bitmap_Pad;	CursorImage.depth       = 1;	CursorImage.bytes_per_line = BITSPER_DLWORD/8; 	CursorImage.bitmap_bit_order = MSBFirst;	CursorPixmap_source = XCreatePixmap( Xdisplay, Lisp_Window.win				, CURSORWIDTH, CURSORHEIGHT, Default_Depth );	CursorPixmap_mask   = XCreatePixmap( Xdisplay, Lisp_Window.win				, CURSORWIDTH, CURSORHEIGHT, Default_Depth );	gcv.function = Video_Inverted ? GXcopyInverted : GXcopy;        gcv.foreground = Black_Pixel;        gcv.background = White_Pixel;	cursor_source_gc = XCreateGC( Xdisplay, Lisp_Window.win				, GCForeground|GCBackground|GCFunction				, &gcv );	cursor_mask_gc   = XCreateGC( Xdisplay, Lisp_Window.win				, GCForeground|GCBackground|GCFunction				, &gcv );	XAllocNamedColor( Xdisplay, Colors, "black" 			, &cursor_fore_xcsd, &xced );	XAllocNamedColor( Xdisplay, Colors, "white" 			, &cursor_back_xcsd, &xced );} /* end init_Xcursor */set_Xcursor( bitmap, hotspot_x, hotspot_y, return_cursor )char *bitmap;int hotspot_x  , hotspot_y;Cursor *return_cursor;{#ifdef TRACE 	printf( "TRACE: set_Xcursor()\n" );#endif	CursorImage.data = (char*) bitmap;	XPutImage( Xdisplay, CursorPixmap_source, cursor_source_gc		, &CursorImage, 0, 0, 0, 0, CURSORWIDTH, CURSORHEIGHT );	XPutImage( Xdisplay, CursorPixmap_mask  , cursor_mask_gc		, &CursorImage, 0, 0, 0, 0, CURSORWIDTH, CURSORHEIGHT );	*return_cursor = XCreatePixmapCursor( Xdisplay			, CursorPixmap_source, CursorPixmap_mask			, &cursor_fore_xcsd, &cursor_back_xcsd			, hotspot_x, hotspot_y );	XFlush( Xdisplay );} /* end set_Xcursor */